<link rel="stylesheet" href="catalog\view\theme\default\stylesheet\home_content.css">

<style>

	/* ===== Skeleton Base ===== */
	.skeleton-card {
		position: relative;
		overflow: hidden;
		border-radius: 12px;
		background: #eee;
		display: flex;
		flex-direction: column;
	}

	.skeleton-card::after {
		content: '';
		position: absolute;
		top: 0;
		left: -150px;
		width: 150px;
		height: 100%;
		background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
		animation: loading 1.2s infinite;
	}

	@keyframes loading {
		0% {
			left: -150px;
		}
		50% {
			left: 100%;
		}
		100% {
			left: 100%;
		}
	}

	/* Text placeholders */
	.skeleton-text {
		height: 16px;
		background: #ddd;
		margin: 8px 10px;
		border-radius: 4px;
	}

	/* Price placeholder */
	.skeleton-price {
		height: 18px;
		width: 60%;
		margin: 6px 10px;
		background: #ddd;
		border-radius: 4px;
	}

	/* Image placeholder */
	.skeleton-image {
		width: 100%;
		background: #ddd;
		border-radius: 12px 12px 0 0;
	}

	.skeleton-card-design-0 {
		height: 300px;
	}

	.skeleton-card-design-0 .skeleton-image {
		height: 180px;
	}

	.skeleton-card-design-0 .skeleton-title {
		height: 20px;
		margin: 10px;
	}

	.skeleton-card-design-0 .skeleton-price {
		height: 18px;
		width: 60%;
		margin: 5px 10px;
	}

	.skeleton-deal-card {
		display: flex;
		align-items: center;
		min-height: 140px;
		border-radius: 10px;
		padding: 12px;
		background: #eee;
	}

	.skeleton-deal-image {
		width: 110px;
		height: 140px;
		background: #ddd;
		border-radius: 6px;
		flex-shrink: 0;
	}

	.skeleton-deal-info {
		flex: 1;
		margin-left: 12px;
	}

	.skeleton-deal-title,
	.skeleton-deal-cat,
	.skeleton-deal-price {
		height: 16px;
		width: 80%;
		background: #ddd;
		margin-bottom: 8px;
		border-radius: 4px;
	}

	.skeleton-equal-card {
		height: 320px;
		border-radius: 12px;
		padding: 12px;
		background: #eee;
		display: flex;
		flex-direction: column;
	}

	.skeleton-equal-image {
		height: 200px;
		width: 100%;
		border-radius: 12px;
		background: #ddd;
		margin-bottom: 8px;
	}

	.skeleton-equal-title {
		height: 16px;
		background: #ddd;
		margin-bottom: 6px;
		border-radius: 4px;
	}

	.skeleton-equal-price {
		height: 18px;
		width: 50%;
		background: #ddd;
		margin-bottom: 6px;
		border-radius: 4px;
	}

	.skeleton-equal-btn {
		height: 32px;
		width: 100%;
		background: #ddd;
		border-radius: 6px;
	}

	/* Skeleton Grid → same as bestseller-grid */
	.skeleton-bestseller-grid {
		display: grid;
		grid-template-columns: repeat(3, 1fr) 2fr;
		grid-template-rows: repeat(2, auto);
		gap: 16px;
	}

	/* Skeleton small card */
	.skeleton-bestseller-card {
		background: #fff;
		border-radius: 8px;
		padding: 10px;
		display: flex;
		flex-direction: column;
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
	}

	/* Skeleton big card */
	.skeleton-bestseller-big {
		grid-row: span 2;
		background: #fff;
		border-radius: 8px;
		padding: 10px;
		display: flex;
		flex-direction: column;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	}

	/* Skeleton parts */
	.skeleton-bestseller-image {
		width: 100%;
		height: 160px;
		background: #eee;
		border-radius: 6px;
		margin-bottom: 8px;
	}

	.skeleton-bestseller-title {
		height: 14px;
		width: 80%;
		background: #eee;
		border-radius: 4px;
		margin-bottom: 6px;
	}

	.skeleton-bestseller-price {
		height: 14px;
		width: 50%;
		background: #eee;
		border-radius: 4px;
	}

	/* Optional shimmer animation */
	@keyframes shimmer {
		0% {
			background-position: -200px 0;
		}
		100% {
			background-position: 200px 0;
		}
	}

	.skeleton-bestseller-image,
	.skeleton-bestseller-title,
	.skeleton-bestseller-price {
		background: linear-gradient(90deg, #eee 25%, #f5f5f5 50%, #eee 75%);
		background-size: 200% 100%;
		animation: shimmer 1.2s infinite;
	}
	/* Skeleton Grid → same as bestseller-grid */
	.skeleton-bestseller-grid {
		display: grid;
		grid-template-columns: repeat(3, 1fr) 2fr;
		grid-template-rows: repeat(2, auto);
		gap: 16px;
	}

	/* Skeleton small card */
	.skeleton-bestseller-card {
		background: #fff;
		border-radius: 8px;
		padding: 10px;
		display: flex;
		flex-direction: column;
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
	}

	/* Skeleton big card */
	.skeleton-bestseller-big {
		grid-row: span 2;
		background: #fff;
		border-radius: 8px;
		padding: 10px;
		display: flex;
		flex-direction: column;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	}

	/* Skeleton parts */
	.skeleton-bestseller-image {
		width: 100%;
		height: 160px;
		background: #eee;
		border-radius: 6px;
		margin-bottom: 8px;
	}

	.skeleton-bestseller-title {
		height: 14px;
		width: 80%;
		background: #eee;
		border-radius: 4px;
		margin-bottom: 6px;
	}

	.skeleton-bestseller-price {
		height: 14px;
		width: 50%;
		background: #eee;
		border-radius: 4px;
	}

	/* Optional shimmer animation */
	@keyframes shimmer {
		0% {
			background-position: -200px 0;
		}
		100% {
			background-position: 200px 0;
		}
	}

	.skeleton-bestseller-image,
	.skeleton-bestseller-title,
	.skeleton-bestseller-price {
		background: linear-gradient(90deg, #eee 25%, #f5f5f5 50%, #eee 75%);
		background-size: 200% 100%;
		animation: shimmer 1.2s infinite;
	}
	/* Skeleton Grid → same as bestseller-grid */
	.skeleton-bestseller-grid {
		display: grid;
		grid-template-columns: repeat(3, 1fr) 2fr;
		grid-template-rows: repeat(2, auto);
		gap: 16px;
	}

	/* Skeleton small card */
	.skeleton-bestseller-card {
		background: #fff;
		border-radius: 8px;
		padding: 10px;
		display: flex;
		flex-direction: column;
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
	}

	/* Skeleton big card */
	.skeleton-bestseller-big {
		grid-row: span 2;
		background: #fff;
		border-radius: 8px;
		padding: 10px;
		display: flex;
		flex-direction: column;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	}

	/* Skeleton parts */
	.skeleton-bestseller-image {
		width: 100%;
		height: 160px;
		background: #eee;
		border-radius: 6px;
		margin-bottom: 8px;
	}

	.skeleton-bestseller-title {
		height: 14px;
		width: 80%;
		background: #eee;
		border-radius: 4px;
		margin-bottom: 6px;
	}

	.skeleton-bestseller-price {
		height: 14px;
		width: 50%;
		background: #eee;
		border-radius: 4px;
	}

	/* Optional shimmer animation */
	@keyframes shimmer {
		0% {
			background-position: -200px 0;
		}
		100% {
			background-position: 200px 0;
		}
	}

	.skeleton-bestseller-image,
	.skeleton-bestseller-title,
	.skeleton-bestseller-price {
		background: linear-gradient(90deg, #eee 25%, #f5f5f5 50%, #eee 75%);
		background-size: 200% 100%;
		animation: shimmer 1.2s infinite;
	}
</style>

{{header}}

{{ladies_group}}
{{recent_view}}
{{most_view}}

<div class="home_content-section">
	{% if category_name1 %}
		<div class="section-heading">{{ category_name1 }}</div>
	{% endif %}

	<!-- ✅ Subcategory Cards Container -->
<div class="so-subcategory-cards">
    {% for subcat in subcategories1 %}
        <div class="so-card">
            <!-- cart icon -->
            <div class="so-lock-icon">
                <i class="fa fa-shopping-bag"></i>
            </div>

            <!-- image -->
            <div class="so-card-image">
                <img src="{{ subcat.thumb }}" alt="{{ subcat.name }}">
            </div>

            <!-- details -->
            <div class="so-card-body">
                <h1>{{ subcat.name }}</h1>
                <p class="so-series">{{ subcat.series }}</p>
                <p class="so-price">₹{{ subcat.price }}</p>
                <div class="so-rating">
                    {% for i in 1..5 %}
                        {% if i <= subcat.rating %}
                            <span class="so-star filled">★</span>
                        {% else %}
                            <span class="so-star">★</span>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>



	<div id="home-sections"></div>
	<div id="loading" style="text-align:center; display:none;">Loading...</div>


	<script>

		// Show skeleton placeholders
		// ---------------------------
		// Show skeleton placeholders
		// ---------------------------
		function showSkeletons(page, index) {
		    const homeSections = document.getElementById('home-sections');
		    let sectionHtml = `<div class="skeleton-wrapper">`; // wrapper added ✅
		
		    if(page === 1 && index === 0){
		        sectionHtml += `<div class="cards-wrapper">`;
		        for(let i=0; i<5; i++){
		            sectionHtml += `
		            <div class="skeleton-card skeleton-card-design-0">
		                <div class="skeleton-image"></div>
		                <div class="skeleton-title"></div>
		                <div class="skeleton-price"></div>
		            </div>`;
		        }
		        sectionHtml += `</div>`;
		    }
		    else if(page === 1 && index === 1){
		        sectionHtml += `<div class="deal-grid">`;
		        for(let i=0; i<4; i++){
		            sectionHtml += `
		            <div class="skeleton-deal-card">
		                <div class="skeleton-deal-image"></div>
		                <div class="skeleton-deal-info">
		                    <div class="skeleton-deal-title"></div>
		                    <div class="skeleton-deal-cat"></div>
		                    <div class="skeleton-deal-price"></div>
		                </div>
		            </div>`;
		        }
		        sectionHtml += `</div>`;
		    }
		    else if(page === 2 && index === 0){
		        sectionHtml += `<div class="best-deals-grid">`;
		        for(let i=0; i<5; i++){
		            sectionHtml += `
		            <div class="skeleton-equal-card">
		                <div class="skeleton-equal-image"></div>
		                <div class="skeleton-equal-title"></div>
		                <div class="skeleton-equal-price"></div>
		                <div class="skeleton-equal-btn"></div>
		            </div>`;
		        }
		        sectionHtml += `</div>`;
		    }
		    else if(page === 2 && index === 1){
		        sectionHtml += `<div class="equal-card-row">`;
		        for(let i=0; i<5; i++){
		            sectionHtml += `
		            <div class="skeleton-equal-card">
		                <div class="skeleton-equal-image"></div>
		                <div class="skeleton-equal-title"></div>
		                <div class="skeleton-equal-price"></div>
		                <div class="skeleton-equal-btn"></div>
		            </div>`;
		        }
		        sectionHtml += `</div>`;
		    }
		    else if(page === 3 && index === 0){
		        sectionHtml += `<div class="bestseller-grid">`;
		        for(let i=0; i<7; i++){
		            const className = (i===3) ? 'skeleton-bestseller-big' : 'skeleton-bestseller-card';
		            sectionHtml += `
		            <div class="${className}">
		                <div class="skeleton-bestseller-image"></div>
		                <div class="skeleton-bestseller-title"></div>
		                <div class="skeleton-bestseller-price"></div>
		            </div>`;
		        }
		        sectionHtml += `</div>`;
		    }
		    else {
		        sectionHtml += `<div class="cards-default-wrapper">`;
		        for(let i=0; i<5; i++){
		            sectionHtml += `
		            <div class="skeleton-card skeleton-card-design-0">
		                <div class="skeleton-image"></div>
		                <div class="skeleton-title"></div>
		                <div class="skeleton-price"></div>
		            </div>`;
		        }
		        sectionHtml += `</div>`;
		    }
		
		    sectionHtml += `</div>`; // close wrapper ✅
		    homeSections.insertAdjacentHTML('beforeend', sectionHtml);
		}
		
		
		
		
		function removeSkeletons() {
		    document.querySelectorAll('.skeleton-wrapper').forEach(el => el.remove());
		}
		
		
		   
		    let page = 1;       
		    let loading = false; 
		      let endReached = false;;
		
		    function loadMoreD() {
		       
		       if (loading || endReached) return;  
		        loading = true; 
		
		          showSkeletons(page, 0);
		        fetch('index.php?route=common/home_content/loadMoreD&page=' + page)
		            .then(res => res.json()) 
		            .then(data => {
		         removeSkeletons(); 
		                console.log('response page=' + page, data);
		
		                
		                if (data.sections && data.sections.length > 0) {
		
		                    
		                    data.sections.forEach((section, index) => {
		
		                        // --------------------------
		                       
		                        // --------------------------
		                        let sectionHtml = `
		                            <div class="home-section" id="section-${page}-${index}">
		                                <div class="home-section-heading">${section.title}</div>
		                                <div class="subcategory-cards">
		                        `;
		
		                      
		                        // PAGE 1, INDEX 0
		                         if (page === 1 && index === 0) {
		                            sectionHtml += `<div class="cards-wrapper">`;
		                            section.items.forEach(item => {
		                                sectionHtml += `
		                                    <div class="card-design-0">
		                                        <div class="card-link" onclick="window.location.href='${item.href}'">
		                                            <img class="index0-img" src="${item.thumb}" alt="${item.name}">
		                                            <div class="index0-heading">${item.name}</div>
		                                            <div class="index0-price" style="color:#953A93; font-weight:600;">
		                                                From <span style="color:#953A93;">
		                                                    ${item.special && item.special !== '' ? item.special : item.price}
		
		                                                </span>
		                                                ${item.special && item.special !== '' ? `<span class="old-price" style="color:#888; text-decoration:line-through; margin-left:5px;">${item.price}</span>` : ''}
		                                            </div>
		                                        </div>
		                                    </div>
		                                `;
		                            });
		                            sectionHtml += `</div>`;
		                        }
		
		
		                        // PAGE 1, INDEX 1 (Today's Best Deals)
		        else if (page === 1 && index === 1) {
		    sectionHtml += `<div class="deal-grid">`;
		    section.items.forEach(prod => {
		        sectionHtml += `
		            <div class="deal-card" onclick="window.location.href='${prod.href}'">
		                <!-- Wishlist top-right -->
		                <a href="javascript:void(0);" 
		   class="wishlist-btn ${prod.in_wishlist ? 'active' : ''}" 
		   onclick="event.stopPropagation(); toggleWishlist(this, ${prod.product_id});">
		   <i class="fa fa-heart"></i>
		</a>
		
		
		                <div class="deal-image">
		                    <img src="${prod.thumb}" alt="${prod.name}">
		                    <div class="discount-badge" style="${prod.discount > 0 ? '' : 'display:none'}">
		                        -${prod.discount}%
		                    </div>
		                </div>
		
		                <div class="deal-info">
		                    <div class="deal-cat">${prod.category || ''}</div>
		                    <div class="deal-title">
		                        ${prod.name.length > 20 ? prod.name.slice(0, 20) + '...' : prod.name}
		                    </div>
		                    <div class="deal-price-text">
		                        From <span class="deal-price">${prod.special ? prod.special : prod.price}</span>
		                    </div>
		                </div>
		            </div>
		        `;
		    });
		    sectionHtml += `</div>`;
		}
		
		
		
		                        // PAGE 2, INDEX 0
		       else if (page === 2 && index === 0) {
		    sectionHtml += `<div class="best-deals-grid">`;
		    section.items.forEach(prod => {
		        sectionHtml += `
		            <div class="best-deals-card">
		                <div class="best-deals-link" onclick="window.location.href='${prod.href}'">
		                    <div class="best-deals-image">
		                        <img src="${prod.thumb}" alt="${prod.name}">
		                    </div>
		                    <div class="best-deals-info">
		                        <div class="best-deals-name">
		                            ${prod.name.length > 15 ? prod.name.slice(0, 12) + '...' : prod.name}
		                        </div>
		                        <div class="best-deals-price" style="color:#953A93; font-weight:600;">
		                            From <span class="current-price" style="color:#953A93;">
		                                ${prod.special && prod.special !== '' ? prod.special : prod.price}
		                            </span>
		                            ${prod.special && prod.special !== '' ? `<span class="old-price" style="color:#888; text-decoration:line-through; margin-left:5px;">${prod.price}</span>` : ''}
		                        </div>
		                    </div>
		                </div>
		            </div>
		        `;
		    });
		    sectionHtml += `</div>`;
		}
		
		
		
		
		                        // PAGE 2, INDEX 1
		                 else if (page === 2 && index === 1) {
		   sectionHtml += `
		    <div class="equal-card-row">
		        ${section.items.slice(0,5).map(item => {
		            // wishlist active check
		            let wishlistItems = JSON.parse(localStorage.getItem("wishlistItems")) || [];
		            let isActive = wishlistItems.includes(item.product_id);
		
		            return `
		            <div class="equal-card" onclick="window.location.href='${item.href}'">
		
		                <a href="javascript:void(0);" 
		                   class="wishlist-btn ${isActive ? 'active' : ''}" 
		                   onclick="event.stopPropagation(); toggleWishlist(${item.product_id}, this);">
		                    <i class="fa fa-heart"></i>
		                </a>
		
		                <div class="equal-card-img-wrapper">
		                    <img class="equal-card-img" src="${item.thumb}" alt="${item.name}">
		                    <div class="discount-badge" style="${item.discount > 0 ? '' : 'display:none'}">
		                        -${item.discount}%
		                    </div>
		                </div>
		                
		                <div class="equal-card-body">
		                    <h4 class="equal-card-title">
		                        ${item.name.length > 13 ? item.name.slice(0, 13) + '...' : item.name}
		                    </h4>
		                    
		                    <div class="equal-card-footer">
		                        <div class="equal-card-price">
		                            ${item.special && item.special !== '' 
		                                ? ` <span class="equal-card-current-price">${item.special}</span>
		                                    <span class="equal-card-old-price">${item.price}</span>` 
		                                : `<span class="equal-card-current-price">${item.price}</span>`}
		                        </div>
		                        <button type="button" class="equal-card-btn w-100"
		                            onclick="event.stopPropagation(); cart.add(${item.product_id});">
		                            Add to Cart
		                        </button>
		                    </div>
		                </div>
		            </div>
		            `;
		        }).join('')}
		    </div>
		   `;
		}
		
		
		// PAGE 2, INDEX 2
		else if (page === 3 && index === 0) {
		   sectionHtml += `
		  <div class="bestseller-section">
		    <div class="bestseller-grid">
		
		      <div class="bestseller-card" onclick="window.location.href='${section.items[0].href}'">
		        <img src="${section.items[0].thumb}" alt="${section.items[0].name}">
		        <div class="bestseller-tittle">${section.items[0].name}</div>
		        <div class="bestseller-price">From ${section.items[0].price}</div>
		      </div>
		
		      <div class="bestseller-card" onclick="window.location.href='${section.items[1].href}'">
		        <img src="${section.items[1].thumb}" alt="${section.items[1].name}">
		        <div class="bestseller-tittle">${section.items[1].name}</div>
		        <div class="bestseller-price">From ${section.items[1].price}</div>
		      </div>
		
		
		      <div class="bestseller-card" onclick="window.location.href='${section.items[2].href}'">
		        <img src="${section.items[2].thumb}" alt="${section.items[2].name}">
		        <div class="bestseller-tittle">${section.items[2].name}</div>
		        <div class="bestseller-price">From ${section.items[2].price}</div>
		      </div>
		      <div class="bestseller-big" onclick="window.location.href='${section.items[4].href}'">
		        <img src="${section.items[4].thumb}" alt="${section.items[4].name}">
		        <div class="bestseller-tittle">${section.items[4].name}</div>
		        <div class="bestseller-price">From ${section.items[4].price}</div>
		      </div>
		
		      <div class="bestseller-card" onclick="window.location.href='${section.items[3].href}'">
		        <img src="${section.items[3].thumb}" alt="${section.items[3].name}">
		        <div class="bestseller-tittle">${section.items[3].name}</div>
		        <div class="bestseller-price">From ${section.items[3].price}</div>
		      </div>
		      
		      <div class="bestseller-card" onclick="window.location.href='${section.items[5].href}'">
		        <img src="${section.items[5].thumb}" alt="${section.items[5].name}">
		        <div class="bestseller-tittle">${section.items[5].name}</div>
		        <div class="bestseller-price">From ${section.items[5].price}</div>
		      </div>
		      
		      <div class="bestseller-card" onclick="window.location.href='${section.items[6].href}'">
		        <img src="${section.items[6].thumb}" alt="${section.items[6].name}">
		        <div class="bestseller-tittle">${section.items[6].name}</div>
		        <div class="bestseller-price">From ${section.items[6].price}</div>
		      </div>
		
		    </div>
		  </div>
		`;
		}
		
		
		
		
		
		                      
		                        // Default Design
		                         else {
		    sectionHtml += `<div class="cards-default-wrapper">`;
		    section.items.forEach(prod => {
		        sectionHtml += `
		            <div class="custom-default">
		                <div class="custom-default-link" onclick="window.location.href='${prod.href}'">
		                    <div class="custom-default-image">
		                        <img src="${prod.thumb}" alt="${prod.name}">
		                    </div>
		                    <div class="custom-default-title">
		                        ${prod.name.length > 18 ? prod.name.slice(0, 15) + '...' : prod.name}
		                    </div>
		                    <div class="custom-default-price" style="color:#953A93; font-weight:600;">
		                        From <span style="color:#953A93;">
		                            ${prod.special && prod.special !== '' ? prod.special : prod.price}
		                        </span>
		                        ${prod.special && prod.special !== '' 
		                            ? `<span class="old-price" style="color:#888; text-decoration:line-through; margin-left:5px;">
		                                   ${prod.price}
		                               </span>` 
		                            : ''}
		                    </div>
		                </div>
		            </div>
		        `;
		    });
		    sectionHtml += `</div>`;
		}
		
		
		                        // --------------------------
		                        // section
		                        // --------------------------
		                        sectionHtml += `
		                                </div>
		                            </div>
		                        `;
		
		                        // --------------------------
		                        // Insert Logic
		                        // --------------------------
		                     if (page === 1 && index === 0) {
		    console.log("Insert Logic → page=1, index=0");
		    document.getElementById('home-sections')
		        .insertAdjacentHTML('beforeend', sectionHtml);
		}
		else if (page === 1 && index === 1) {
		    console.log("Insert Logic → page=1, index=1");
		    document.getElementById('home-sections')
		        .insertAdjacentHTML('beforeend', sectionHtml);
		}
		else if (page === 1 && index === 1) {
		    console.log("Insert Logic → page=2, index=0");
		    document.getElementById('home-sections')
		        .insertAdjacentHTML('afterbegin', sectionHtml);
		}
		else if (page === 2 && index === 0) {
		    console.log("Insert Logic → page=3, index=0");
		    document.getElementById('home-sections')
		        .insertAdjacentHTML('beforeend', sectionHtml);
		
		
		}
		else {
		    console.log(`Insert Logic → default (page=${page}, index=${index})`);
		    document.getElementById('home-sections')
		        .insertAdjacentHTML('beforeend', sectionHtml);
		}
		
		
		                    });
		
		                  
		                    page++;
		                } else {
		                    console.log("No more sections for page=" + page);
		                    endReached = true;
		                }
		
		                loading = false;
		
		               
		                if (document.body.offsetHeight <= window.innerHeight) {
		                    loadMoreD();
		                }
		            })
		            .catch(err => {
		                console.error(err);
		               
		                loading = false;
		            });
		    }
		   
		    loadMoreD();
		
		    // --------------------------
		    // Infinite Scroll Event
		    // --------------------------
		    window.addEventListener('scroll', () => {
		        console.log("scroll check", window.innerHeight + window.scrollY, document.body.offsetHeight);
		        if (!loading && window.innerHeight + window.scrollY >= document.body.offsetHeight - 200) {
		            loadMoreD();
		        }
		    });
		</script>
		<script>
		// ✅ Wishlist toggle function
		function toggleWishlist(el, product_id) {
		    let wishlistItems = JSON.parse(localStorage.getItem("wishlistItems")) || [];
		
		    if (el.classList.contains("active")) {
		        // remove
		        wishlist.remove(product_id);
		        el.classList.remove("active");
		        wishlistItems = wishlistItems.filter(id => id !== product_id);
		    } else {
		        // add
		        wishlist.add(product_id);
		        el.classList.add("active");
		        if (!wishlistItems.includes(product_id)) {
		            wishlistItems.push(product_id);
		        }
		    }
		
		    localStorage.setItem("wishlistItems", JSON.stringify(wishlistItems));
		}
		
		</script>
		</div>
		<script>
		
		document.addEventListener("DOMContentLoaded", function () {
		  const cardsWrapper = document.querySelector(".so-subcategory-cards");
		  const prevBtn = document.querySelector(".scroll-btn.prev");
		  const nextBtn = document.querySelector(".scroll-btn.next");
		  
		  let currentIndex = 0;
		  const cardWidth = document.querySelector(".so-card-link").offsetWidth + 20; // 20px gap
		  const totalCards = document.querySelectorAll(".so-card-link").length;
		  const visibleCards = 5;
		  const maxIndex = totalCards - visibleCards;
		
		  function updateButtons() {
		    prevBtn.style.display = currentIndex <= 0 ? "none" : "block";
		    nextBtn.style.display = currentIndex >= maxIndex ? "none" : "block";
		  }
		
		  nextBtn.addEventListener("click", () => {
		    if (currentIndex < maxIndex) {
		      currentIndex++;
		      cardsWrapper.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
		      updateButtons();
		    }
		  });
		
		  prevBtn.addEventListener("click", () => {
		    if (currentIndex > 0) {
		      currentIndex--;
		      cardsWrapper.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
		      updateButtons();
		    }
		  });
		
		  updateButtons();
		});
		</script>

		