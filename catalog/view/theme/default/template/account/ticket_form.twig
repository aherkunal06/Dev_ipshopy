{{ header }}
<div style='display:flex; gap:20px; margin-inline:20px;'>
    
    <div class="container" style="max-width: 1200px; margin: 30px auto;">
        <div class="card" style="box-shadow:0 2px 8px #ccc;padding:30px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h1 style="margin-bottom:20px;">{{ heading_title }}</h1>
          <a href="javascript:history.back()" class="btn btn-secondary" style="float: right; margin-bottom: 20px; background-color: #9c0d85; color: white; border: none;">
        ‚Üê Back
    </a>
             {# it is the view ticket button i removed #}
    
                {# <a href="{{ view_tickets }}" class="btn btn-info" style="height:40px;display:flex;align-items:center;">
                    <i class="fa fa-eye" style="margin-right:8px;"></i> {{ button_view_tickets }}
                </a> #}
    
            </div>
            {% if success %}
                <div class="alert alert-success">{{ success }}</div>
            {% endif %}
            {% if error_warning %}
                <div class="alert alert-danger">{{ error_warning }}</div>
            {% endif %}
            <form action="{{ action }}" method="post" enctype="multipart/form-data">
                <!-- Dynamic Order ID / Product Name field at the top -->
                <div class="form-group" id="order-id-group" style="margin-bottom:15px; display:none;">
                    <label>Order ID</label>
                    <input type="text" name="order_id" class="form-control" style="width:100%;padding:8px;">
                </div>
                <div class="form-group" id="product-name-group" style="margin-bottom:15px; display:none;">
                    <label>Product Name</label>
                    <input type="text" name="product_name" class="form-control" style="width:100%;padding:8px;">
                </div>
                <!-- Rest of your fields -->
                <div class="form-group" style="margin-bottom:15px;">
                    <label>{{ entry_subject }}</label>
                    <input type="text" name="subject" class="form-control" required style="width:100%;padding:8px;" value="{{ subject }}">
                </div>
                <div class="form-group" style="margin-bottom:15px;">
                    <label>{{ entry_category }}</label>
                    <select name="category" class="form-control" required style="width:100%;padding:8px;" id="category-select">
                        {% for cat in categories %}
                            <option value="{{ cat.category_id }}" {% if category == cat.category_id %}selected{% endif %}>{{ cat.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group" style="margin-bottom:15px;">
                    <label>{{ entry_description }}</label>
                    <textarea name="description" class="form-control" required style="width:100%;padding:8px;height:120px;">{{ description }}</textarea>
                </div>
                
                <div class="form-group" style="margin-bottom:15px;">
                    <label>{{ entry_upload }}</label>
                    <input type="file" name="file" class="form-control" />
                </div>
                <button type="submit" class="btn btn-primary" style="background-color: #9c0d85; border-color: #46b8da; color: #fff;padding:10px 30px;">{{ button_submit }}</button>
            </form>
        </div>
    </div>

</div>
{{ footer }}

<script>
document.addEventListener('DOMContentLoaded', function() {
    var categorySelect = document.getElementById('category-select');
    var orderIdGroup = document.getElementById('order-id-group');
    var productNameGroup = document.getElementById('product-name-group');

    function updateFields() {
        var selectedText = categorySelect.options[categorySelect.selectedIndex].text.trim();
        // Show Product Name only for "Product or Service Inquiries"
        if (selectedText === 'Product or Service Inquiries') {
            productNameGroup.style.display = 'block';
            orderIdGroup.style.display = 'none';
        } else {
            productNameGroup.style.display = 'none';
            orderIdGroup.style.display = 'block';
        }
    }

    categorySelect.addEventListener('change', updateFields);
    updateFields(); // Initial call
});
</script>

