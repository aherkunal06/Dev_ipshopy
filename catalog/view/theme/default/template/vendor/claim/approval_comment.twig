{{ header }}
{{ column_left }}

<div id="content">
  <div class="container-fluid">
    <h1>Approval Comments <small class="pull-right"><a href="{{ cancel }}">‚Üê Back to Claims</a></small></h1>

    <div class="panel panel-default">
      <div class="panel-heading"><strong>Comment Thread</strong></div>
      <div class="panel-body">
        {% if comments %}
          {% for comment in comments %}
            <div style="border-bottom: 1px solid #ccc; margin-bottom: 10px;">
              <strong>{{ comment.comment_by == 'vendor' ? 'Vendor' : 'Admin' }}</strong>
              <p>{{ comment.comment_text }}</p>
              {% if comment.media %}
                {% for file in comment.media %}
                  {% if file ends with '.jpg' or file ends with '.png' %}
                    <img src="image/{{ file }}" width="100" style="margin: 5px;">
                  {% else %}
                    <a href="image/{{ file }}" target="_blank">{{ file }}</a><br>
                  {% endif %}
                {% endfor %}
              {% endif %}
              <small>{{ comment.date_added }}</small>
            </div>
          {% endfor %}
        {% else %}
          <p>No comments yet.</p>
        {% endif %}
      </div>
    </div>

    <form action="{{ action }}" method="post" enctype="multipart/form-data">
      <div class="panel panel-default">
        <div class="panel-heading"><strong>Reply</strong></div>
        <div class="panel-body">
          <textarea name="reply" class="form-control" placeholder="Type your reply..." required rows="4"></textarea>
          <br>
          <label><strong>Attach Media</strong></label>
          <input type="file" name="media[]" multiple class="form-control" />
          <p><small>Allowed: jpg, png, zip, doc, pdf, mp4 | Max: 10MB each</small></p>
          <button type="submit" class="btn btn-primary">Submit Reply</button>
          <a href="{{ cancel }}" class="btn btn-default">Cancel</a>
        </div>
      </div>
    </form>
  </div>
</div>

{{ footer }}
