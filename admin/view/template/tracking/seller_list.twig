{{ header }}
{{ column_left }}

<div id="content" style="background-color: #f5f7fa; min-height: 100vh;">
  <div class="page-header" style="border-bottom: 1px solid #ddd;">
    <div class="container-fluid"> 
      <h1 style="display: inline-block; color: #333;""><i class="fa fa-calendar"></i> Date-wise Seller Registrations</h1>
      <div class="pull-right" style="margin-top: 5px;">
      <a href="index.php?route=tracking/seller_list/user&user_token={{ user_token }}" class="btn btn-default">
        <i class="fa fa-reply"></i>
      </a>
    </div>
  </div>
  
   
      


  <div class="container-fluid">

    <div class="panel panel-default" style="box-shadow: 0 3px 10px rgba(0,0,0,0.1); border-radius: 8px;">
      <div class="panel-heading" style="background-color: white; color: black; border-radius: 8px 8px 0 0;">
        <h3 class="panel-title"><i class="fa fa-filter"></i> Filter by Date</h3>
      </div>

      <div class="panel-body" style="background-color: #f5f5f5; border-radius: 0 0 8px 8px;">
        <form id="filter-form" action="" method="get" class="form-horizontal">
          <input type="hidden" name="user_token" value="{{ user_token }}" />
          <input type="hidden" name="filter_username" value="{{ filter_username }}" />
          <div class="row" style="margin-bottom: 15px;">
            <div class="col-sm-4">
              <label for="input-date" style="font-weight: bold; color: #333;">Date</label>
              <input type="date" name="filter_date" value="{{ filter_date }}" id="input-date" class="form-control" />
            </div>
            <div class="col-sm-2" style="margin-top: 25px;">
              <button type="button" id="button-filter" class="btn btn-primary btn-block" onclick="filterData()">
                <i class="fa fa-filter"></i> Filter
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="panel panel-default" style="box-shadow: 0 3px 10px rgba(0,0,0,0.1); border-radius: 8px;">
      <div class="panel-heading" style="background-color: white; color: black; border-radius: 8px 8px 0 0;">
        <h3 class="panel-title"><i class="fa fa-list"></i> Seller Registration Summary</h3>
      </div>

      <div class="panel-body">
        <div class="table-responsive">
          <table class="table table-bordered table-hover">
            <thead style="background-color: #f1f1f1;">
              <tr>
                <th>Date</th>
                <th>Registered By</th>
                <th>No. of Registrations</th>
                <th>Approve</th>
                <th>Disapprove</th>
                <th>Pending</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              {% if sellers %}
                {% for seller in sellers %}
                  <tr>
                    <td>{{ seller.date }}</td>
                    <td>{{ seller.registered_by }}</td>
                    <td>{{ seller.total_registrations }}</td>
                    <td>{{ seller.approve_count }}</td>
                    <td>{{ seller.disapprove_count }}</td>
                    <td>{{ seller.pending_count }}</td>
                    <td>
                      <a href="{{ seller.view }}" class="btn btn-info btn-sm">
                        <i class="fa fa-eye"></i>
                      </a>
                    </td>
                  </tr>
                {% endfor %}
              {% else %}
                <tr>
                  <td colspan="7" class="text-center">No data found</td>
                </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

{{ footer }}

<script type="text/javascript">
  function filterData() {
    var url = window.location.href.split('?')[0];
    var filterDate = document.getElementById('input-date').value;
    var userToken = document.querySelector('input[name="user_token"]').value;
    var filterUsername = new URLSearchParams(window.location.search).get('filter_username');
    var params = new URLSearchParams(window.location.search);

    if (filterDate) {
      params.set('filter_date', filterDate);
    }
    if (filterUsername) {
      params.set('filter_username', filterUsername);
    }
    if (userToken) {
      params.set('user_token', userToken);
    }

    url += '?' + params.toString();
    location.href = url;
  }
</script>
