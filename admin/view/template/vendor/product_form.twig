{{ header }}
{# added on 19-04-2025 ------------ related to the image required ------#}
<style>
    .alert-warning {
        color: #ff3c02;
        background-color: transparent;
        border-color: transparent;
    }
    .delivery-section h2 {
		font-size: 20px;
		margin-bottom: 20px;
		color: #333;
	}

	.delivery-section .form-group {
		margin-bottom: 20px;
	}

	.delivery-section label {
		display: block;
		font-weight: 600;
		margin-bottom: 8px;
		color: #444;
	}

	.delivery-section .optional {
		font-weight: normal;
		font-size: 12px;
		color: #888;
	}

	.delivery-section input,
	.delivery-section select,
	.delivery-section textarea {
		width: 100%;
		padding: 10px 12px;
		border: 1px solid #ccc;
		border-radius: 8px;
		font-size: 14px;
		box-sizing: border-box;
	}

	.delivery-section input:focus,
	.delivery-section select:focus,
	.delivery-section textarea:focus {
		border-color: #007bff;
		outline: none;
	}

	.delivery-section .charges {
		display: flex;
		flex-wrap: wrap;
		gap: 15px;
	}

	.delivery-section .charge-box {
		flex: 1 1 30%;
		min-width: 180px;
	}

	.delivery-section small {
		display: block;
		margin-top: 4px;
		color: #777;
		font-size: 12px;
	}

	.delivery-section #error {
		color: red;
		margin-top: 5px;
	}
	#option-value0 tbody tr td select {
	    width:fit-content;
	}
	/*variation start*/
	.variantmodal {
		display: none;
		position: fixed;
		z-index: 1000;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.5);
	}

	.variantmodal-content {
		background: white;
		margin: 15% auto;
		padding: 20px;
		width: 300px;
		border-radius: 8px;
		position: relative;
	}

	.variantmodalclose {
		position: absolute;
		top: 10px;
		right: 15px;
		font-size: 20px;
		cursor: pointer;
	}
		.input-as-span {
		max-width: fit-content;
		border: none;
		background: transparent;
		font: inherit;
		font-weight:600;
		padding: 2px 5px;
		margin: 0;
		outline: none;
		pointer-events: none; /* Optional: makes it non-editable */
		text-align: center;
		/*width: 9ch;*/
		line-height: 24px;
		background: rgba(149, 58, 147, 0.3);
		color: black;
	}
#add-variant-tab {
		line-height: 30px;
		height: fit-content;
		border: none;
		border-radius: 5px;
		background: #953a93;
		color: white;
		cursor: pointer;
		margin-block: 13px;
		padding-inline: 8px;
	}
	#confirmVariant {
		background: purple;
		color: white;
		border: none;
		border-radius: 4px;
		margin-top: 5px;
		padding: 5px 8px;
		margin-left: auto;
		width: 100%;
	}
	#variantNameInput{
	    width: 100%;
    line-height: 24px;
    padding: 5px;
    border-radius: 3px;
    border: 1px solid gray;
    outline:none;
	}
	#variantNameInput:focus-visible{
	    border:1px solid #953a93;
	    
	}
	#add-variant-tab2{
	    line-height: 30px;
    height: fit-content;
    border: none;
    border-radius: 5px;
    background: #953a93;
    color: white;
    cursor: pointer;
    margin-block: 13px;
    padding-inline: 8px;
}
	
	.inactive_variant{
	    color:gray !important;
	    font-weight:600;
	}
	.inactive_variant:hover{
	    color:black !important;
	}
	/*.product-variants{*/
	/*    display*/
	/*}*/
	/*variation end */
</style>
{#/*----------------------------------------------------*/#}
{{ column_left }}

<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-product" data-toggle="tooltip" title="{{ button_save }}" id='saveProduct' class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if error_warning %}
    <div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %}
    {#variation starts#}
    {% if success %}
			<div class="alert alert-success">
				<i class="fa fa-check-circle"></i>
				{{ success }}
				<button type="button" class="close" data-dismiss="alert">&times;</button>
			</div>
	{% endif %}
	{% if error_variant_name %}
		<div class='alert alert-danger'>
			{{ error_variant_name }}
		</div>
	{% endif %}
		{#variation ends #}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_form }}</h3>
        {#variation starts #}
         {% if variants %}
        <div class="d-flex align-items-center" style="display: flex; gap: 10px;">
        	<div id="variant-tabs" class="form-group d-flex align-items-center" style="display:flex; gap: 10px; align-items:center; line-height:30px;">
        	    {#edit variant starts #}
        	    {#{% if product_variants %}#}
					{#<div class="product-variants">#}
						{#{% for variant in product_variants %}#}
						{#	<div class="variant">#}
						{#		<p class="variant-name">#}
						{#			<a href="index.php?route=vendor/product/edit&user_token={{ user_token }}&product_id={{ variant.product_id }}" class="variant-link" data-id="{{ variant.product_id }}">#}
						{#				{{ variant.variant_name }}#}
						{#			</a>#}
						{#		</p>#}
						{#	</div>#}
						{#{% endfor %}#}
					{#</div>#}

				{#{% endif %}#}
				{#edit variant ends #}
    			{% for variant in variant_data %}
    			{% if variant.variant_name !=variant_name %}
    				<div class='variant-tab ' style='color:black !important; line-height:24px;'>
    					<a href="index.php?route=vendor/product/edit&user_token={{ user_token }}&product_id={{ variant.product_id }}" class="variant-link inactive_variant" data-id="{{ variant.product_id }}">
							{{ variant.variant_name }}
						</a>
    				</div>
    				{% endif %}
    			{% endfor %}
    			{#{% if variant_name %}#}
    			    <input id='newVariant' value='{{variant_name}}' name='newVariant' class='input-as-span' {% if variant_name %} style='display:block;' {% else %} style='display:none' {% endif %} readonly/>
    			{#{% endif %}#}
    		</div>

            <button id="add-variant-tab">Create Variant</button>
            <button id="add-variant-tab2"
            onclick="window.location.href='index.php?route=vendor/product/add&user_token={{ user_token }}&variant_group_id={{ variant_group_id }}'">Add New Variant</button>
					<!-- Modal -->
			<div id="variantModal" class="variantmodal">
				<div class="variantmodal-content">
					<span class="variantmodalclose">&times;</span>
					<label for="variantNameInput">Color:</label>
					<input type="text" name='variant_name' value='{{variant_name}}' id="variantNameInput"/>
					<button id="confirmVariant">Confirm</button>
				</div>
			</div>
        </div>
        {% endif %}
        {#variation ends #}

      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-product" class="form-horizontal">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-general" data-toggle="tab">{{ tab_general }}</a></li>
            <li><a href="#tab-data" data-toggle="tab">{{ tab_data }}</a></li>
            <li><a href="#tab-links" data-toggle="tab">{{ tab_links }}</a></li>
            <li><a href="#tab-attribute" data-toggle="tab">{{ tab_attribute }}</a></li>
            <li><a href="#tab-option" data-toggle="tab">{{ tab_option }}</a></li>
            <li><a href="#tab-recurring" data-toggle="tab">{{ tab_recurring }}</a></li>
            <li><a href="#tab-discount" data-toggle="tab">{{ tab_discount }}</a></li>
            <li><a href="#tab-special" data-toggle="tab">{{ tab_special }}</a></li>
             <li><a href="#tab-faq" data-toggle="tab">FAQs</a></li>
            <li><a href="#tab-image" data-toggle="tab">{{ tab_image }}</a></li>
            <li><a href="#tab-reward" data-toggle="tab">{{ tab_reward }}</a></li>
            <li><a href="#tab-seo" data-toggle="tab">{{ tab_seo }}</a></li>
            <li><a href="#tab-design" data-toggle="tab">{{ tab_design }}</a></li>
			
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-general">
              <ul class="nav nav-tabs" id="language">
                {% for language in languages %}
                <li><a href="#language{{ language.language_id }}" data-toggle="tab"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /> {{ language.name }}</a></li>
                {% endfor %}
              </ul>
              <div class="tab-content">
               {% for language in languages %}
                <div class="tab-pane" id="language{{ language.language_id }}">
                  {#<div class="form-group required">#}
                  {#  <label class="col-sm-2 control-label" for="input-name{{ language.language_id }}">{{ entry_name }}</label>#}
                  {#  <div class="col-sm-10">#}
                  {#    <input type="text" name="product_description[{{ language.language_id }}][name]" value="{{ product_description[language.language_id] ? product_description[language.language_id].name }}" placeholder="{{ entry_name }}" id="input-name{{ language.language_id }}" class="form-control" />#}
                  {#    {% if error_name[language.language_id] %}#}
                  {#    <div class="text-danger">{{ error_name[language.language_id] }}</div>#}
                  {#    {% endif %} </div>#}
                  {#</div>#}
                  {# added on 27-04-2025---------------------------------------------------------------------------#}
                  <div class="form-group required {% if error_name[language.language_id] %}has-error{% endif %}">
                      <label class="col-sm-2 control-label" for="input-name{{ language.language_id }}">
                        {{ entry_name }}
                      </label>
                      <div class="col-sm-10">
                        <input type="text" 
                               name="product_description[{{ language.language_id }}][name]" 
                               value="{{ product_description[language.language_id] ? product_description[language.language_id].name }}" 
                               placeholder="{{ entry_name }}" 
                               id="input-name{{ language.language_id }}" 
                               class="form-control product-name-input product-name" 
                               minlength="3" 
                               maxlength="255" 
                               required />
                        
                        {% if error_name[language.language_id] %}
                          <div class="text-danger">
                            {{ error_name[language.language_id] }}
                          </div>
                        {% endif %}
                      </div>
                    </div>
                  {#----------------------------------------------------------------------------------------------------#}
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-description{{ language.language_id }}">{{ entry_description }}</label>
                    <div class="col-sm-10">
                      <textarea name="product_description[{{ language.language_id }}][description]" placeholder="{{ entry_description }}" id="input-description{{ language.language_id }}" data-toggle="summernote" data-lang="{{ summernote }}" class="form-control summernote-description">{{ product_description[language.language_id] ? product_description[language.language_id].description }}</textarea>
                    </div>
                  </div>
                  {#key_highlight start #}
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-key-highlight-{{ language.language_id }}">Key
                      Highlight</label>
                    <div class="col-sm-10">
                      <textarea name="product_description[{{ language.language_id }}][key_highlight]"
                        id="input-key-highlight-{{ language.language_id }}" class="form-control" rows="3"
                        placeholder="Enter key highlights">{{ product_description[language.language_id]['key_highlight'] ?? '' }}</textarea>

                      {% if error_key_highlight[language.language_id] %}
                      <div class="text-danger">{{ error_key_highlight[language.language_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                  {#key_highlight ends #}
                  	<div class="form-group ">
						<input type="hidden" name='variant_id' id='variant_id'>
						<input type="hidden" name='variant_name' value='{{variant_name}}' id='variant_name'>
						{#<label for="inputColor" class="col-sm-2 control-label">Color</label>#}
						{#<div class="col-sm-10" >#}
						    
						{#<input type="text" name='inputColor' value="{{inputColor}}" placeholder='Green' id='inputColor' class="form-control">#}
						{#<div class="text-danger" id="error-meta-title-{{ language.language_id }}">#}
      {#                    {% if error_inputColor %}#}
      {#                      {{ error_inputColor }}#}
      {#                    {% endif %}#}
      {#                  </div>#}
						{#</div>#}
                    </div>
                  {#<div class="form-group required">#}
                  {#  <label class="col-sm-2 control-label" for="input-meta-title{{ language.language_id }}">{{ entry_meta_title }}</label>#}
                  {#  <div class="col-sm-10">#}
                  {#    <input type="text" name="product_description[{{ language.language_id }}][meta_title]" value="{{ product_description[language.language_id] ? product_description[language.language_id].meta_title }}" placeholder="{{ entry_meta_title }}" id="input-meta-title{{ language.language_id }}" class="form-control" />#}
                  {#    {% if error_meta_title[language.language_id] %}#}
                  {#    <div class="text-danger">{{ error_meta_title[language.language_id] }}</div>#}
                  {#    {% endif %} </div>#}
                  {#</div>#}
                  {# added on 27-04-2025------------------------------------------------------------------#}
                  <div class="form-group required {% if error_meta_title[language.language_id] %}has-error{% endif %}">
                      <label class="col-sm-2 control-label" for="input-meta-title{{ language.language_id }}">
                        {{ entry_meta_title }}
                      </label>
                      <div class="col-sm-10">
                        <input type="text" 
                               name="product_description[{{ language.language_id }}][meta_title]" 
                               value="{{ product_description[language.language_id] ? product_description[language.language_id].meta_title }}" 
                               placeholder="{{ entry_meta_title }}" 
                               id="input-meta-title{{ language.language_id }}" 
                               class="form-control"
                               minlength="3" 
                               maxlength="255" 
                               required />
                        
                        <div class="text-danger" id="error-meta-title-{{ language.language_id }}">
                          {% if error_meta_title[language.language_id] %}
                            {{ error_meta_title[language.language_id] }}
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  {#------------------------------------------------------------------------------------------#}
                  
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-meta-description{{ language.language_id }}">{{ entry_meta_description }}</label>
                    <div class="col-sm-10">
                      <textarea name="product_description[{{ language.language_id }}][meta_description]" rows="5" placeholder="{{ entry_meta_description }}" id="input-meta-description{{ language.language_id }}" class="form-control">{{ product_description[language.language_id] ? product_description[language.language_id].meta_description }}</textarea>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-meta-keyword{{ language.language_id }}">{{ entry_meta_keyword }}</label>
                    <div class="col-sm-10">
                      <textarea name="product_description[{{ language.language_id }}][meta_keyword]" rows="5" placeholder="{{ entry_meta_keyword }}" id="input-meta-keyword{{ language.language_id }}" class="form-control">{{ product_description[language.language_id] ? product_description[language.language_id].meta_keyword }}</textarea>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-tag{{ language.language_id }}"><span data-toggle="tooltip" title="{{ help_tag }}">{{ entry_tag }}</span></label>
                    <div class="col-sm-10">
                      <input type="text" name="product_description[{{ language.language_id }}][tag]" value="{{ product_description[language.language_id] ? product_description[language.language_id].tag }}" placeholder="{{ entry_tag }}" id="input-tag{{ language.language_id }}" class="form-control" />
                    </div>
                  </div>
                </div>
                {% endfor %}</div>
            </div>
            <div class="tab-pane" id="tab-data">
              {#<div class="form-group required">#}
              {#  <label class="col-sm-2 control-label" for="input-model">{{ entry_model }}</label>#}
              {#  <div class="col-sm-10">#}
              {#    <input type="text" name="model" value="{{ model }}" placeholder="{{ entry_model }}" id="input-model" class="form-control" />#}
              {#    {% if error_model %}#}
              {#    <div class="text-danger">{{ error_model }}</div>#}
              {#    {% endif %}#}
              {#  </div>#}
              {#</div>#}
              {#--- added on 27-04-2025-----------------------------------------------------#}
              <div class="form-group required {% if error_model %}has-error{% endif %}">
                <label class="col-sm-2 control-label" for="input-model">
                  {{ entry_model }}
                </label>
                <div class="col-sm-10">
                <input type="text" 
                       name="model" 
                       value="{{ model }}" 
                       placeholder="{{ entry_model }}" 
                       id="input-model" 
                       class="form-control"
                       minlength="3" 
                       maxlength="255" 
                       required />
            
                <div class="text-danger" id="error-model">
                  {% if error_model %}
                    {{ error_model }}
                  {% endif %}
                </div>
              </div>
            </div>
              {#-----------------------------------------------------------------------------------#}
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-sku"><span data-toggle="tooltip" title="{{ help_sku }}">{{ entry_sku }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="sku" value="{{ sku }}" placeholder="{{ entry_sku }}" id="input-sku" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-upc"><span data-toggle="tooltip" title="{{ help_upc }}">{{ entry_upc }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="upc" value="{{ upc }}" placeholder="{{ entry_upc }}" id="input-upc" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-ean"><span data-toggle="tooltip" title="{{ help_ean }}">{{ entry_ean }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="ean" value="{{ ean }}" placeholder="{{ entry_ean }}" id="input-ean" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-jan"><span data-toggle="tooltip" title="{{ help_jan }}">{{ entry_jan }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="jan" value="{{ jan }}" placeholder="{{ entry_jan }}" id="input-jan" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-isbn"><span data-toggle="tooltip" title="{{ help_isbn }}">{{ entry_isbn }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="isbn" value="{{ isbn }}" placeholder="{{ entry_isbn }}" id="input-isbn" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-mpn"><span data-toggle="tooltip" title="{{ help_mpn }}">{{ entry_mpn }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="mpn" value="{{ mpn }}" placeholder="{{ entry_mpn }}" id="input-mpn" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-location">{{ entry_location }}</label>
                <div class="col-sm-10">
                  <input type="text" name="location" value="{{ location }}" placeholder="{{ entry_location }}" id="input-location" class="form-control" />
                </div>
              </div>
              {#<div class="form-group">#}
              {#  <label class="col-sm-2 control-label" for="input-price">{{ entry_price }}</label>#}
              {# <div class="col-sm-10">#}
              {#   <input type="text" name="price" value="{{ price }}" placeholder="{{ entry_price }}" id="input-price" class="form-control" />#}
              {# </div>#}
              {#</div>#}
              {#--- added changes on 27-04-2025 ---------------------------------#}
              <div class="form-group required {% if error_price %}has-error{% endif %}">
                  <label class="col-sm-2 control-label" for="input-price">{{ entry_price }}</label>
                  <div class="col-sm-10">
                    <input type="text"
                     name="price" 
                     value="{{ price }}"
                     placeholder="{{ entry_price }}"
                     id="input-price" 
                     class="form-control"
                     required />
                
                    <div class="text-danger" id="error-price">
                      {% if error_price %}
                        {{ error_price_required }}
                      {% endif %}
                    </div>
                  </div>
                </div>

              {#-----------------------------------------------------------------------------------------#}
              {#<div class="form-group">#}
              {#  <label class="col-sm-2 control-label" for="input-tax-class">{{ entry_tax_class }}</label>#}
              {#  <div class="col-sm-10">#}
              {#    <select name="tax_class_id" id="input-tax-class" class="form-control">#}
              {#      <option value="0">{{ text_none }}</option>#}
                    

              {#      {% for tax_class in tax_classes %}#}
              {#      {% if tax_class.tax_class_id == tax_class_id %}#}

                    
              {#      <option value="{{ tax_class.tax_class_id }}" selected="selected">{{ tax_class.title }}</option>#}
                    

              {#      {% else %}#}

                    
              {#      <option value="{{ tax_class.tax_class_id }}">{{ tax_class.title }}</option>#}
                    

              {#      {% endif %}#}
              {#      {% endfor %}#}
              {#    </select>#}
              {#  </div>#}
              {#</div>#}
              {#--- added changes on 27-04-2025--------------------------------#}
              <div class="form-group required {% if error_hsn_code %}has-error{% endif %}">
                  <label class="col-sm-2 control-label" for="input-hsn">HSN Code</label>
                  <div class="col-sm-10">
                    <input type="text" name="hsn_code" value="{{ hsn_code }}" placeholder="Enter HSN Code" id="input-hsn" class="form-control" required />
                    <div id="hsn-description" style="margin-top: 10px; font-weight: bold;"></div>
                
                    {% if error_hsn_code %}
                      <div class="text-danger">{{ error_hsn_code_required }}</div>
                    {% endif %}
                  </div>
                </div>
                
                
                <!-- GST Rate (Dropdown disabled) -->
                <div class="form-group">
              <label class="col-sm-2 control-label" for="input-gst-rate">GST Rate</label>
              <div class="col-sm-10">
                <select id="input-gst-rate" class="form-control readonly-dropdown" name="gst_rate" >
                  <option value="">Select GST Rate</option>
                  <option value="0%" {{ gst_rate == '0%' ? 'selected' : '' }}>0%</option>
                  <option value="3%" {{ gst_rate == '3%' ? 'selected' : '' }}>3%</option>
                  <option value="5%" {{ gst_rate == '5%' ? 'selected' : '' }}>5%</option>
                  <option value="12%" {{ gst_rate == '12%' ? 'selected' : '' }}>12%</option>
                  <option value="18%" {{ gst_rate == '18%' ? 'selected' : '' }}>18%</option>
                  <option value="28%" {{ gst_rate == '28%' ? 'selected' : '' }}>28%</option>
                </select>
                <input type="hidden" name="gst_rate" id="gst-rate-hidden" value="">
              </div>
            </div>

                 {# ---------------------------------------------------------------#}
              {#--------------------------------------------------------------------#}
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-quantity">{{ entry_quantity }}</label>
                <div class="col-sm-10">
                  <input type="text" name="quantity" value="{{ quantity }}" placeholder="{{ entry_quantity }}" id="input-quantity" class="form-control" />
                </div>
              </div>
              
              {#code added for return refund replace on 28-04-2025#}
              
              {#  <div class="form-group">#}
              {#  <label class="col-sm-2 control-label" for="input-return">{{ entry_return }}</label>#}
              {#  <div class="col-sm-10">#}
              {#    <select name="return" id="input-return" class="form-control">#}


              {#      {% if return %}#}


              {#        <option value="1" selected="selected">{{ text_yes }}</option>#}
              {#        <option value="0">{{ text_no }}</option>#}


              {#      {% else %}#}


              {#        <option value="1">{{ text_yes }}</option>#}
              {#        <option value="0" selected="selected">{{ text_no }}</option>#}


              {#      {% endif %}#}


              {#    </select>#}
              {#  </div>#}
              {#</div>#}
              {#  <div class="form-group">#}
              {#  <label class="col-sm-2 control-label" for="input-refund">{{ entry_refund }}</label>#}
              {#  <div class="col-sm-10">#}
              {#    <select name="refund" id="input-refund" class="form-control">#}


              {#      {% if refund %}#}


              {#        <option value="1" selected="selected">{{ text_yes }}</option>#}
              {#        <option value="0">{{ text_no }}</option>#}


              {#      {% else %}#}


              {#        <option value="1">{{ text_yes }}</option>#}
              {#        <option value="0" selected="selected">{{ text_no }}</option>#}


              {#      {% endif %}#}


              {#    </select>#}
              {#  </div>#}
              {#</div>#}
              {#  <div class="form-group">#}
              {#  <label class="col-sm-2 control-label" for="input-replace">{{ entry_replace }}</label>#}
              {#  <div class="col-sm-10">#}
              {#    <select name="replace" id="input-replace" class="form-control">#}


              {#      {% if replace %}#}


              {#        <option value="1" selected="selected">{{ text_yes }}</option>#}
              {#        <option value="0">{{ text_no }}</option>#}


              {#      {% else %}#}


              {#        <option value="1">{{ text_yes }}</option>#}
              {#        <option value="0" selected="selected">{{ text_no }}</option>#}


              {#      {% endif %}#}


              {#    </select>#}
              {#  </div>#}
              {#</div>#}
              {#return refund replace end here#}
              

              
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-minimum"><span data-toggle="tooltip" title="{{ help_minimum }}">{{ entry_minimum }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="minimum" value="{{ minimum }}" placeholder="{{ entry_minimum }}" id="input-minimum" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-subtract">{{ entry_subtract }}</label>
                <div class="col-sm-10">
                  <select name="subtract" id="input-subtract" class="form-control">
                    {% if subtract %}

                    
                    <option value="1" selected="selected">{{ text_yes }}</option>
                    <option value="0">{{ text_no }}</option>
                    

                    {% else %}

                    
                    <option value="1">{{ text_yes }}</option>
                    <option value="0" selected="selected">{{ text_no }}</option>
                    

                    {% endif %}
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-stock-status"><span data-toggle="tooltip" title="{{ help_stock_status }}">{{ entry_stock_status }}</span></label>
                <div class="col-sm-10">
                  <select name="stock_status_id" id="input-stock-status" class="form-control">
                    {% for stock_status in stock_statuses %}
                    {% if stock_status.stock_status_id == stock_status_id %}

                    
                    <option value="{{ stock_status.stock_status_id }}" selected="selected">{{ stock_status.name }}</option>
                    

                    {% else %}

                    
                    <option value="{{ stock_status.stock_status_id }}">{{ stock_status.name }}</option>
                    

                    {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">{{ entry_shipping }}</label>
                <div class="col-sm-10">
                  <label class="radio-inline"> {% if shipping %}
                    <input type="radio" name="shipping" value="1" checked="checked" />
                    {{ text_yes }}
                    {% else %}
                    <input type="radio" name="shipping" value="1" />
                    {{ text_yes }}
                    {% endif %} </label>
                  <label class="radio-inline"> {% if not shipping %}
                    <input type="radio" name="shipping" value="0" checked="checked" />
                    {{ text_no }}
                    {% else %}
                    <input type="radio" name="shipping" value="0" />
                    {{ text_no }}
                    {% endif %} </label>
                </div>
              </div>
              
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-date-available">{{ entry_date_available }}</label>
                <div class="col-sm-3">
                  <div class="input-group date">
                    <input type="text" name="date_available" value="{{ date_available }}" placeholder="{{ entry_date_available }}" data-date-format="YYYY-MM-DD" id="input-date-available" class="form-control" />
                    <span class="input-group-btn">
                    <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                    </span></div>
                </div>
              </div>
              {#<div class="form-group">#}
              {#  <label class="col-sm-2 control-label" for="input-length">{{ entry_dimension }}</label>#}
              {#  <div class="col-sm-10">#}
              {#    <div class="row">#}
              {#      <div class="col-sm-4">#}
              {#        <input type="text" name="length" value="{{ length }}" placeholder="{{ entry_length }}" id="input-length" class="form-control" />#}
              {#      </div>#}
              {#      <div class="col-sm-4">#}
              {#        <input type="text" name="width" value="{{ width }}" placeholder="{{ entry_width }}" id="input-width" class="form-control" />#}
              {#      </div>#}
              {#      <div class="col-sm-4">#}
              {#        <input type="text" name="height" value="{{ height }}" placeholder="{{ entry_height }}" id="input-height" class="form-control" />#}
              {#      </div>#}
              {#    </div>#}
              {#  </div>#}
              {#</div>#}
              {#------- added on 27-04-2025-----------------------------------------------------------#}
              <div class="form-group required  {% if error_length or error_width or error_height %}has-error{% endif %}">
                  <label class="col-sm-2 control-label" for="input-length">{{ entry_dimension }}</label>
                  <div class="col-sm-10">
                    <div class="row">
                
                      <div class="col-sm-4 {% if error_length %}has-error{% endif %}">
                        <input type="text" name="length" value="{{ length }}" placeholder="{{ entry_length }}"
                               id="input-length" class="form-control {% if error_length %}is-invalid{% endif %}" />
                        <div class="text-danger">{{ error_length }}</div>
                
                      </div>
                
                      <div class="col-sm-4 {% if error_width %}has-error{% endif %}">
                        <input type="text" name="width" value="{{ width }}" placeholder="{{ entry_width }}"
                               id="input-width" class="form-control {% if error_width %}is-invalid{% endif %}" />
                        <div class="text-danger">{{ error_width }}</div>
                      </div>
                
                      <div class="col-sm-4 {% if error_height %}has-error{% endif %}">
                        <input type="text" name="height" value="{{ height }}" placeholder="{{ entry_height }}"
                               id="input-height" class="form-control {% if error_height %}is-invalid{% endif %}" />
                        <div class="text-danger">{{ error_height }}</div>
                      </div>
                
                    </div>
                  </div>
                </div>

              {#---------------------------------------------------------------------------------------#}
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-length-class">{{ entry_length_class }}</label>
                <div class="col-sm-10">
                  <select name="length_class_id" id="input-length-class" class="form-control">
                    {% for length_class in length_classes %}
                    {% if length_class.length_class_id == length_class_id %}
                    <option value="{{ length_class.length_class_id }}" selected="selected">{{ length_class.title }}</option>
                    

                    {% else %}

                    
                    <option value="{{ length_class.length_class_id }}">{{ length_class.title }}</option>
                    

                    {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-weight">{{ entry_weight }}</label>
                <div class="col-sm-10">
                  <input type="text" name="weight" value="{{ weight }}" placeholder="{{ entry_weight }}" id="input-weight" class="form-control"  required />
                  {% if error_weight %}
                      <div class="text-danger">{{ error_weight }}</div>
                    {% endif %}
                </div>
              </div>
              {# added on 04-04-2025--------------------------#}
              <div class="form-group required">
    				<label class="col-sm-2 control-label" for="input-volumetric-weight">{{ entry_volumetric_weight }}</label>
    				<div class="col-sm-10">
    					<input type="text" name="volumetric_weight"  value="{{ volumetric_weight }}" placeholder="Volumetric Weight" id="input-volumetric-weight" class="form-control" readonly/>
    					{% if error_volumetric_weight %}
    						<div class="text-danger">{{ error_volumetric_weight }}</div>
    					{% endif %}
    				</div>
    			</div>
    			{#----------------------------------------------------#}
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-weight-class">{{ entry_weight_class }}</label>
                <div class="col-sm-10">
                  <select name="weight_class_id" id="input-weight-class" class="form-control">
                    {% for weight_class in weight_classes %}
                    {% if weight_class.weight_class_id == weight_class_id %}

                    
                    <option value="{{ weight_class.weight_class_id }}" selected="selected">{{ weight_class.title }}</option>
                    

                    {% else %}

                    
                    <option value="{{ weight_class.weight_class_id }}">{{ weight_class.title }}</option>
                    

                    {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
                <div class="col-sm-10">
                  <select name="status" id="input-status" class="form-control">
                    {% if status %}

                    
                    <option value="1" >{{ text_enabled }}</option>
                    <option value="0" selected="selected">{{ text_disabled }}</option>
                    

                    {% else %}

                    
                    <option value="1">{{ text_enabled }}</option>
                    <option value="0" selected="selected">{{ text_disabled }}</option>
                    

                    {% endif %}
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-sort-order">{{ entry_sort_order }}</label>
                <div class="col-sm-10">
                  <input type="text" name="sort_order" value="{{ sort_order }}" placeholder="{{ entry_sort_order }}" id="input-sort-order" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-payment">{{ entry_payment }}</label>
                <div class="col-sm-10">
                  <select name="payment_method" id="input-payment" class="form-control">
                    <option value="Prepaid">Prepaid</option>
                    <option value="Cod">Cash on Delivery</option>
                    {#-- updated on the 31-0-2025 -- bydefault selected both#}
                    <option value="Both" selected="selected">Both</option>
                  </select>
                </div>
              </div>
              
            
                <!-- Warranty Applicable Toggle -->
                <div class="form-group product-warranty required">
                  <label class="col-sm-2 control-label" for="input-is-warranty">Warranty Applicable</label>
                  <div class="col-sm-10">
                    <select name="product_warranty[is_warranty]" id="input-is-warranty" class="form-control" required>
                      <option value="" disabled selected>Select an option</option>
                      <option value="1" {{ product_warranty.is_warranty == '1' ? 'selected' : '' }}>Yes</option>
                      <option value="0" {{ product_warranty.is_warranty == '0' ? 'selected' : '' }}>No</option>
                    </select>
                                        {% if error_is_warranty %}
                                  <div class="text-danger">{{ error_is_warranty }}</div>
                                  {% endif %}
                  </div>
                </div>

              <!-- Warranty Fields (shown only if is_warranty == 1) -->
              <div id="warranty-fields" {% if product_warranty.is_warranty !='1' %}style="display: none;" {%
                endif %}>
                <!-- Warranty By -->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-warranty-by">Warranty By</label>
                  <div class="col-sm-10">
                    <select name="product_warranty[warranty_by]" id="input-warranty-by" class="form-control">
                      <option value="Seller" {{ product_warranty.warranty_by=='Seller' ? 'selected' : '' }}>Seller
                        </option>
                        <option value="Manufacturer" {{ product_warranty.warranty_by=='Manufacturer' ? 'selected'
                        : '' }}>Manufacturer</option>
                        </select>
                        {% if error_warranty_by %}
                  <div class="text-danger">{{ error_warranty_by }}</div>
                  {% endif %}
                        </div>
                </div>

                <!-- Warranty Duration -->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-warranty-duration">Warranty Duration(in
                    months)</label>
                    <div class="col-sm-10">
                      <input type="text" name="product_warranty[warranty_duration]"
                      value="{{ product_warranty.warranty_duration }}" id="input-warranty-duration"
                      class="form-control period_checker" placeholder="e.g. 6 Months" />
                  {% if error_warranty_duration %}
                  <div class="text-danger">{{ error_warranty_duration }}</div>
                  {% endif %}
                      </div>
                </div>

                <!-- Warranty Description -->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-warranty-description">Warranty Description</label>
                  <div class="col-sm-10">
                    <textarea name="product_warranty[warranty_description]" id="input-warranty-description"
                    class="form-control name_checker ">{{ product_warranty.warranty_description }}</textarea>
                    {% if error_warranty_description %}
                  <div class="text-danger">{{ error_warranty_description }}</div>
                  {% endif %}
                    </div>
                </div>
              </div>


               <!-- Return Applicable Toggle -->
                  <div class="form-group product-return required">
                <label class="col-sm-2 control-label" for="input-is-returnable">Return Applicable</label>
                <div class='col-sm-10'>
                <select name="product_return[is_returnable]" id="input-is-returnable" class="form-control" >
                     <option value="" disabled selected>Select an option</option>
                  <option value="1" {{ product_return.is_returnable=='1' ? 'selected' : '' }}>Yes</option>
                  <option value="0" {{ product_return.is_returnable=='0' ? 'selected' : '' }}>No</option>
                </select>
                  {% if error_is_returnable %}
                  <div class="text-danger">{{ error_is_returnable }}</div>
                  {% endif %}
                </div>
              </div>

              <!-- Return Fields (shown only if is_returnable == 1) -->
              <div id="return-fields" {% if product_return.is_returnable !='1' %}style="display: none;" {% endif
                %}>
                <!-- Return Duration -->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-return-duration">Return Duration (in days)</label>
                  <div class='col-sm-10'>
                  <input type="text" name="product_return[return_duration_period]"
                    value="{{ product_return.return_duration_period }}" id="input-return-duration"
                    class="form-control period_checker" placeholder="e.g. 7 Days " />
                  {% if error_return_duration_period %}
                  <div class="text-danger">{{ error_return_duration_period }}</div>
                  {% endif %}
                    </div>
                </div>

                <!-- Return Policy Details -->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-return-policy">Return Policy Details</label>
                  <div class='col-sm-10'>
                  <textarea name="product_return[return_policy_details]" id="input-return-policy"
                    class="form-control name_checker ">{{ product_return.return_policy_details }}</textarea>
                  {% if error_return_policy_details %}
                  <div class="text-danger">{{ error_return_policy_details }}</div>
                  {% endif %}
                    </div>
                </div>
              </div>
              
             <!-- Product Replacement Policy -->
                <div class="form-group product-replacement required">
                <label class="col-sm-2 control-label" for="input-is-replacable">Is Replaceable</label>
                <div class='col-sm-10'>
                <select name="replacement_policy[is_replacable]" id="input-is-replacable" class="form-control" required>
                     <option value="" disabled selected>Select an option</option>
                  <option value="1" {{ replacement_policy.is_replacable=='1' ? 'selected' : '' }}>Yes</option>
                  <option value="0" {{ replacement_policy.is_replacable=='0' ? 'selected' : '' }}>No</option>
                </select>
                   {% if error_is_replacable %}
                  <div class="text-danger">{{ error_is_replacable }}</div>
                  {% endif %}
                </div>
              </div>
              <!-- Replacement fields content here -->
              <div id="replacement-fields" {% if replacement_policy.is_replacable !='1' %}style="display: none;"
                {% endif %}>
                <!-- Replacement Period -->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-replacement-period">Replacement Period (in
                    days)</label>
                    <div class='col-sm-10'>
                  <input type="text" name="replacement_policy[replacement_period]"
                    value="{{ replacement_policy.replacement_period }}" id="input-replacement-period"
                    class="form-control period_checker"  placeholder="e.g. 7 Days " />
                  {% if error_replacement_period %}
                  <div class="text-danger">{{ error_replacement_period }}</div>
                  {% endif %}
                    </div>
                </div>
                <!-- Replacement Reason -->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-replacement-reason">Replacement Reason</label>
                  <div class='col-sm-10'>
                  <input type="text" name="replacement_policy[replacement_reason]"
                    value="{{ replacement_policy.replacement_reason }}" id="input-replacement-reason"
                    class="form-control name_checker" />
                  {% if error_replacement_reason %}
                  <div class="text-danger">{{ error_replacement_reason }}</div>
                  {% endif %}
                    </div>
                </div>
                <!-- Replacement Policy -->
                <div class="form-group">
                  <label class=" col-sm-2 control-label" for="input-replacement-policy">Replacement Policy</label>
                  <div class='col-sm-10'>
                  <textarea name="replacement_policy[replacement_policy]" id="input-replacement-policy"
                    class="form-control name_checker">{{ replacement_policy.replacement_policy }}</textarea>
                  {% if error_replacement_policy %}
                  <div class="text-danger">{{ error_replacement_policy }}</div>
                  {% endif %}
                    </div>
                </div>
                <!--- Replacement Description -->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-replacement-description">Replacement
                    Description</label>
                    <div class='col-sm-10'>
                  <textarea  name="replacement_policy[replacement_description]"
                    id="input-replacement-description"
                    class="form-control name_checker ">{{ replacement_policy.replacement_description }}</textarea>
                  {% if error_replacement_description %}
                  <div class="text-danger">{{ error_replacement_description }}</div>
                  {% endif %}
                    </div>
                </div>
              </div>

              {#<!-- //product replacement policy ends -->#}

            
              {#availablity start#}
              {# availability #}
						
              {#<div class="delivery-section">#}
            	<div class="form-group delivery-section">
            		{#<h5>Select Product Delivery Area</h5>#}
            
            		<label for="deliveryOption" class='col-sm-2 control-label'>Select Delivery Area</label>
            		<div class='col-sm-10'>
            			<select id="deliveryOption" name="deliveryOption">
            				<option value="all-india" {% if deliveryOption == 'all-india' %} selected {% endif %}>All India</option>
            				<option value="zonal" {% if deliveryOption == 'zonal' %} selected {% endif %}>Zonal (within your state)</option>
            				<option value="local" {% if deliveryOption == 'local' %} selected {% endif %}>Local (within your city)</option>
            				<option value="custom" {% if deliveryOption == 'custom' %} selected {% endif %}>Add Pincodes (comma-separated)</option>
            			</select>
            
            			<div id="selectedState" style="display:none; margin-top: 15px; align-items: center;">
            				{% if vendorState %}
            					<span style="min-width: fit-content; margin-right: 10px;">Your Current State is</span>
            					<input type="text" id="vendorState" name="vendorState" disabled value="{{vendorState}}" style="border: none; background: white; font-weight: bold; min-width: fit-content; padding: 0;">
            				{% endif %}
            			</div>
            
            			<div id="selectedCity" style="display:none; margin-top: 15px; align-items: center;">
            				{% if vendorCity %}
            					<span style="min-width: fit-content; margin-right: 10px;">Your Current City is</span>
            					<input type="text" id="vendorCity" name="vendorCity" disabled value="{{vendorCity}}" style="border: none; background: white; font-weight: bold; padding: 0;">
            				{% endif %}
            			</div>
            
            			<div id="customInputDiv" style="margin-top: 15px; display: none;">
            				<label for="pincodeInput">Enter up to 50 pincodes (comma-separated):</label>
            				<textarea id="pincodeInput" name="pincodeInput" rows="4" cols="50" placeholder="e.g., 110001, 400001, 560001" >{{pincodeInput}}</textarea>
            				<div id="error"></div>
            			</div>
            		</div>
            
            	</div>
            		{# pincode ends  #}
            
        		<div class='form-group delivery-section'>
        			<label class='col-sm-2 control-label'>Enter your courier charges (optional)</label>
        			<div id="courierCharges" class="charges col-sm-10">
        				<div class="charge-box">
        					<label for="localCharges" id="localChargesContainer">
        						Local Charges
        						<input type="text" id="localCharges" name="localCharges" value="{{localCharges}}" placeholder="local">
        					</label>
        					<p id="localHidden" style="display: none; color: red;">Local courier charges should not be more than 90</p>
        				</div>
        
        				<div class="charge-box">
        					<label for="zonalCharges" id="zonalChargesContainer">
        						Zonal Charges
        						<input type="text" id="zonalCharges" name="zonalCharges" value="{{zonalCharges}}" placeholder="zonal">
        					</label>
        					<p id="zonalHidden" style="display: none; color: red;">Zonal courier charges should not be more than 140</p>
        				</div>
        
        				<div class="charge-box">
        					<label for="nationalCharges" id="nationalChargesContainer">
        						National Charges
        						<input type="text" id="nationalCharges" name="nationalCharges" value="{{nationalCharges}}" placeholder="national">
        					</label>
        					<p id="nationalHidden" style="display: none; color: red;">National courier charges should not be more than 180</p>
        				</div>
        			</div>
        
        		</div>
    			<div id="freeDeliverySection" class="form-group mt-3 delivery-section" style="display: none;">
    				<label for="freeDeliveryInput" class='col-sm-2 control-label'>
    					Set Free Delivery
    				</label>
    				<div class='col-sm-10'>
    				    
    				<input type="text" id="freeDeliveryInput"  name="courier_free_price" value="{{courier_free_price}}" inputmode="numeric" placeholder="E.g: 4 Quantities" />
    				<small>Free delivery charges apply when the total quantity of the product exceeds this number.</small>
    				</div>
    			</div>
    			<div style='text-align:center; font-size:12px;'>Note: These courier charges will be visible to the customer. as courier charges</div>
            {#</div>#}

              {#availablity end#}
              
            </div>
            <div class="tab-pane" id="tab-links">
				{#<div class="form-group">#}
				{#	<label class="col-sm-2 control-label" for="input-manufacturer"><span data-toggle="tooltip" title="{{ help_manufacturer }}">{{ entry_manufacturer }}</span></label>#}
				{#	<div class="col-sm-10">#}
				{#		<input type="text" name="manufacturer" value="{{ manufacturer }}" placeholder="{{ entry_manufacturer }}" id="input-manufacturer" class="form-control" />#}
				{#		<input type="hidden" name="manufacturer_id" value="{{ manufacturer_id }}" />#}
				{#	</div>#}
				{#</div>#}
				
				<div class="form-group">
					<label class="col-sm-2 control-label" for="input-vendor"><span data-toggle="tooltip" title="{{ help_vendor }}">{{ entry_vendor }}</span></label>
					<div class="col-sm-10">
						<input type="text" name="vendor" value="{{ vendor }}" placeholder="{{ entry_vendor }}" id="input-vendor" class="form-control" />
						<input type="hidden" name="vendor_id" value="{{ vendor_id }}" />
						<!--25-10-2018 new code-->
						{% if error_vendor %}
						  <div class="text-danger">{{ error_vendor }}</div>
						{% endif %}
						<!--25-10-2018 new code-->
					</div>
				</div>
				{#--- added on 27-04-2025----------------------------------------#}
				<div class="form-group required">
                <label class="col-sm-2 control-label" for="input-manufacturer"><span data-toggle="tooltip" title="{{ help_manufacturer }}">{{ entry_manufacturer }}</span></label>
                <div class="col-sm-10">
                   {#<input type="text" name="manufacturer" value="{{ manufacturer }}" placeholder="{{ entry_manufacturer }}" id="input-manufacturer" class="form-control" required/>#}
                  
                   {#<input type="hidden" name="manufacturer_id" value="{{ manufacturer_id }}"/> #}

                            
                    <input type="text" name="manufacturer" value="{{ manufacturer }}" placeholder="{{ entry_manufacturer }}" id="input-manufacturer" class="form-control {% if error_manufacturer %}is-invalid{% endif %}" required/>
                    <input type="hidden" name="manufacturer_id" value="{{ manufacturer_id }}"/>
                    
                    {% if error_manufacturer %}
                      <div class="text-danger">{{ error_manufacturer }}</div>
                    {% endif %}

                </div>
              </div>

				{#--------------------------------------------------------------------------------------------#}
				
              {#<div class="form-group">#}
              {#  <label class="col-sm-2 control-label" for="input-category"><span data-toggle="tooltip" title="{{ help_category }}">{{ entry_category }}</span></label>#}
              {#  <div class="col-sm-10">#}
              {#    <input type="text" name="category" value="" placeholder="{{ entry_category }}" id="input-category" class="form-control" />#}
              {#    <div id="product-category" class="well well-sm" style="height: 150px; overflow: auto;">#}
              {#    {% for product_category in product_categories %}#}
              {#    <div id="product-category{{ product_category.category_id }}"><i class="fa fa-minus-circle"></i> {{ product_category.name }}#}
              {#        <input type="hidden" name="product_category[]" value="{{ product_category.category_id }}" />#}
              {#      </div>#}
              {#    {% endfor %}#}
              {#    </div>#}
              {#  </div>#}
              {#</div>#}
              
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-category">
                  <span data-toggle="tooltip" title="{{ help_category }}">{{ entry_category }}</span>
                </label>
                <div class="col-sm-10">
                  <!-- Hidden fields for pre-selecting category levels -->
                  <input type="hidden" id="preselect_level_1" value="{{ category_level_1 }}">
                  <input type="hidden" id="preselect_level_2" value="{{ category_level_2 }}">
                  <input type="hidden" id="preselect_level_3" value="{{ category_level_3 }}">
                  <input type="hidden" id="preselect_level_4" value="{{ category_level_4 }}">
                  <input type="hidden" id="preselect_level_5" value="{{ category_level_5 }}">


                  <!-- Category Search Bar -->
                  <input type="text" id="category-search" class="form-control" placeholder="Search Category" style="margin-bottom: 10px;" />
                  
                  {# <div id="product-category" class="well well-sm" style="height: 150px; overflow: auto;">#}
                  {#  {% for product_category in product_categories %}#}
                  {#  <div id="product-category{{ product_category.category_id }}">#}
                  {#    <i class="fa fa-minus-circle"></i> {{ product_category.name }}#}
                  {#    <input type="hidden" name="product_category[]" value="{{ product_category.category_id }}" />#}
                  {#  </div>#}
                  {#  {% endfor %}#}
                  {#</div> #}

                  <!-- Category Level Selects -->
                  <select id="input-category" name="category_level_1" class="form-control">
                    <option value="">Select Category</option>
                    {% for category in categories %}
                      <option value="{{ category.category_id }}"
                        {% if category.category_id == selected_categories.level_1 %} selected="selected" {% endif %}>
                        {{ category.category_name }}
                      </option>
                    {% endfor %}
                  </select>
                  <select id="input-subcategory" name="category_level_2" class="form-control" {% if not selected_categories.level_1 %} style="display:none;" {% endif %}>
                    <option value="">Select Sub-Category</option>
                    {% for category in categories %}
                      <option value="{{ category.category_id }}"
                        {% if category.category_id == selected_categories.level_2 %} selected="selected" {% endif %}>
                        {{ category.category_name }}
                      </option>
                    {% endfor %}
                  </select>
                  <select id="input-subsubcategory" name="category_level_3" class="form-control" {% if not selected_categories.level_2 %} style="display:none;" {% endif %}>
                    <option value="">Select Sub-Sub-Category</option>
                    {% for category in categories %}
                      <option value="{{ category.category_id }}"
                        {% if category.category_id == selected_categories.level_3 %} selected="selected" {% endif %}>
                        {{ category.category_name }}
                      </option>
                    {% endfor %}
                  </select>
                  <select id="input-subsubsubcategory" name="category_level_4" class="form-control" {% if not selected_categories.level_3 %} style="display:none;" {% endif %}>
                    <option value="">Select Sub-Sub-Sub-Category</option>
                    {% for category in categories %}
                      <option value="{{ category.category_id }}"
                        {% if category.category_id == selected_categories.level_4 %} selected="selected" {% endif %}>
                        {{ category.category_name }}
                      </option>
                    {% endfor %}
                  </select>
                  <select id="input-subsubsubsubcategory" name="category_level_5" class="form-control" {% if not selected_categories.level_4 %} style="display:none;" {% endif %}>
                    <option value="">Select Sub-Sub-Sub-Sub-Category</option>
                    {% for category in categories %}
                      <option value="{{ category.category_id }}"
                        {% if category.category_id == selected_categories.level_5 %} selected="selected" {% endif %}>
                        {{ category.category_name }}
                      </option>
                    {% endfor %}
                  </select>
                  {% for product_category in product_categories %}
                    <div id="product-category{{ product_category.category_id }}">
                      {#<i class="fa fa-minus-circle"></i>#}
                      {#{{ product_category.name }}#}
                      {% if product_category.name2 %} > {{ product_category.name2 }}{% endif %}
                      {% if product_category.name3 %} > {{ product_category.name3 }}{% endif %}
                      {% if product_category.name4 %} > {{ product_category.name4 }}{% endif %}
                      {% if product_category.name5 %} > {{ product_category.name5 }}{% endif %}
                      <input type="hidden" name="product_category[]" value="{{ product_category.category_id }}" />
                    </div>
                  {% endfor %}
                </div>
              </div>
              
              <!-- Product Condition/ Shubham Sir - 27/05/2025-->
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-product-condition">Product Condition</label>
                  <div class="col-sm-10">
                    <select name="product_condition" id="input-product-condition" class="form-control">
                      <option value="new" {{ product_condition == 'new' ? 'selected' : '' }}>New</option>
                      <option value="refurbished" {{ product_condition == 'refurbished' ? 'selected' : '' }}>Refurbished</option>
                    </select>
                  </div>
                </div>
                
                <!-- Refurbished Description -->
                <div class="form-group" id="refurbished-description-group" style="{{ product_condition == 'refurbished' ? '' : 'display:none;' }}">
                  <label class="col-sm-2 control-label" for="input-refurbished-description">Refurbished Description</label>
                  <div class="col-sm-10">
                    <textarea name="refurbished_description" rows="5" id="input-refurbished-description" class="form-control">{{ refurbished_description }}</textarea>
                  </div>
                </div>
               <!-- ------------= -->
              
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-filter"><span data-toggle="tooltip" title="{{ help_filter }}">{{ entry_filter }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="filter" value="" placeholder="{{ entry_filter }}" id="input-filter" class="form-control" />
                  <div id="product-filter" class="well well-sm" style="height: 150px; overflow: auto;">
                   {% for product_filter in product_filters %}
                    <div id="product-filter{{ product_filter.filter_id }}"><i class="fa fa-minus-circle"></i> {{ product_filter.name }}
                      <input type="hidden" name="product_filter[]" value="{{ product_filter.filter_id }}" />
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">{{ entry_store }}</label>
                <div class="col-sm-10">
                  <div class="well well-sm" style="height: 150px; overflow: auto;"> {% for store in stores %}
                    <div class="checkbox">
                      <label> {% if store.store_id in product_store %}
                        <input type="checkbox" name="product_store[]" value="{{ store.store_id }}" checked="checked" />
                        {{ store.name }}
                        {% else %}
                        <input type="checkbox" name="product_store[]" value="{{ store.store_id }}" />
                        {{ store.name }}
                        {% endif %} </label>
                    </div>
                    {% endfor %}</div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-download"><span data-toggle="tooltip" title="{{ help_download }}">{{ entry_download }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="download" value="" placeholder="{{ entry_download }}" id="input-download" class="form-control" />
                  <div id="product-download" class="well well-sm" style="height: 150px; overflow: auto;">
                  {% for product_download in product_downloads %}
                    <div id="product-download{{ product_download.download_id }}"><i class="fa fa-minus-circle"></i> {{ product_download.name }}
                      <input type="hidden" name="product_download[]" value="{{ product_download.download_id }}" />
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-related"><span data-toggle="tooltip" title="{{ help_related }}">{{ entry_related }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="related" value="" placeholder="{{ entry_related }}" id="input-related" class="form-control" />
                  <div id="product-related" class="well well-sm" style="height: 150px; overflow: auto;">
                    {% for product_related in product_relateds %}
                    <div id="product-related{{ product_related.product_id }}"><i class="fa fa-minus-circle"></i> {{ product_related.name }}
                      <input type="hidden" name="product_related[]" value="{{ product_related.product_id }}" />
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="tab-attribute">
              <div class="table-responsive">
                <table id="attribute" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_attribute }}</td>
                      <td class="text-left">{{ entry_text }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
                  {% set attribute_row = 0 %}
                  {% for product_attribute in product_attributes %}
                  <tr id="attribute-row{{ attribute_row }}">
                    <td class="text-left" style="width: 40%;"><input type="text" name="product_attribute[{{ attribute_row }}][name]" value="{{ product_attribute.name }}" placeholder="{{ entry_attribute }}" class="form-control" />
                      <input type="hidden" name="product_attribute[{{ attribute_row }}][attribute_id]" value="{{ product_attribute.attribute_id }}" /></td>
                      <td class="text-left">{% for language in languages %}
                      <div class="input-group"><span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span>
                        <textarea name="product_attribute[{{ attribute_row }}][product_attribute_description][{{ language.language_id }}][text]" rows="5" placeholder="{{ entry_text }}" class="form-control">{{ product_attribute.product_attribute_description[language.language_id] ? product_attribute.product_attribute_description[language.language_id].text }}</textarea>
                      </div>
                      {% endfor %}</td>
                      <td class="text-right"><button type="button" onclick="$('#attribute-row{{ attribute_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set attribute_row = attribute_row + 1 %}
                  {% endfor %}
                    </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="2"></td>
                      <td class="text-left"><button type="button" onclick="addAttribute();" data-toggle="tooltip" title="{{ button_attribute_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-option">
              <div class="row">
                <div class="col-sm-2">
                  <ul class="nav nav-pills nav-stacked" id="option">
                    {% set option_row = 0 %}
                    {% for product_option in product_options %}
                    <li><a href="#tab-option{{ option_row }}" data-toggle="tab"><i class="fa fa-minus-circle" onclick="$('a[href=\'#tab-option{{ option_row }}\']').parent().remove(); $('#tab-option{{ option_row }}').remove(); $('#option a:first').tab('show');"></i> {{ product_option.name }}</a></li>
                    {% set option_row = option_row + 1 %}
                    {% endfor %}
                    <li>
                      <input type="text" name="option" value="" placeholder="{{ entry_option }}" id="input-option" class="form-control" />
                    </li>
                  </ul>
                </div>
                <div class="col-sm-10">
                  <div class="tab-content">
                    {% set option_row = 0 %}
                    {% set option_value_row = 0 %}
                    {% for product_option in product_options %}
                    <div class="tab-pane" id="tab-option{{ option_row }}">
                      <input type="hidden" name="product_option[{{ option_row }}][product_option_id]" value="{{ product_option.product_option_id }}" />
                      <input type="hidden" name="product_option[{{ option_row }}][name]" value="{{ product_option.name }}" />
                      <input type="hidden" name="product_option[{{ option_row }}][option_id]" value="{{ product_option.option_id }}" />
                      <input type="hidden" name="product_option[{{ option_row }}][type]" value="{{ product_option.type }}" />
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-required{{ option_row }}">{{ entry_required }}</label>
                        <div class="col-sm-10">
                          <select name="product_option[{{ option_row }}][required]" id="input-required{{ option_row }}" class="form-control">
                            {% if product_option.required %}

                            
                            <option value="1" selected="selected">{{ text_yes }}</option>
                            <option value="0">{{ text_no }}</option>
                            

                            {% else %}

                            
                            <option value="1">{{ text_yes }}</option>
                            <option value="0" selected="selected">{{ text_no }}</option>
                            

                            {% endif %}

                          
                          </select>
                        </div>
                      </div>
                      {% if product_option.type == 'text' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control" />
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'textarea' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <textarea name="product_option[{{ option_row }}][value]" rows="5" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control">{{ product_option.value }}</textarea>
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'file' %}
                      <div class="form-group" style="display: none;">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control" />
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'date' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-3">
                          <div class="input-group date">
                            <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD" id="input-value{{ option_row }}" class="form-control" />
                            <span class="input-group-btn">
                            <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                            </span></div>
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'time' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <div class="input-group time">
                            <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" data-date-format="HH:mm" id="input-value{{ option_row }}" class="form-control" />
                            <span class="input-group-btn">
                            <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                            </span></div>
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'datetime' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <div class="input-group datetime">
                            <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-value{{ option_row }}" class="form-control" />
                            <span class="input-group-btn">
                            <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                            </span></div>
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'select' or product_option.type == 'radio' or product_option.type == 'checkbox' or product_option.type == 'image' %}
                      <div class="table-responsive">
                        <table id="option-value{{ option_row }}" class="table table-striped table-bordered table-hover">
                          <thead>
                            <tr>
                              <td class="text-left">{{ entry_option_value }}</td>
                              <td class="text-right">{{ entry_quantity }}</td>
                              {#code added for return refund replace on 28-04-2025#}
                              {# <td class="text-right">{{ entry_return }}</td>#}
                              {#<td class="text-right">{{ entry_refund }}</td>#}
                              {#<td class="text-right">{{ entry_replace }}</td>#}
                              {#return refund replace end here#}
                              <td class="text-left">{{ entry_subtract }}</td>
                              <td class="text-right">{{ entry_price }}</td>
                              <td class="text-right">{{ entry_option_points }}</td>
                              <td class="text-right">{{ entry_weight }}</td>
                              <td></td>
                            </tr>
                          </thead>
                          <tbody>
                           {% for product_option_value in product_option.product_option_value %}
                           <tr id="option-value-row{{ option_value_row }}">
                            <td class="text-left"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][option_value_id]" class="form-control">
                            {% if option_values[product_option.option_id] %}

                                  {% for option_value in option_values[product_option.option_id] %}

                                  {% if option_value.option_value_id == product_option_value.option_value_id %}
                                  <option value="{{ option_value.option_value_id }}" selected="selected">{{ option_value.name }}</option>
                               {% else %}
                              <option value="{{ option_value.option_value_id }}">{{ option_value.name }}</option>
                               {% endif %}
                                  {% endfor %}
                                  {% endif %}
                                </select>
                               <input type="hidden" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][product_option_value_id]" value="{{ product_option_value.product_option_value_id }}" /></td>
                              <td class="text-right"><input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][quantity]" value="{{ product_option_value.quantity }}" placeholder="{{ entry_quantity }}" class="form-control" /></td>
                              {#code added for return refund replace on 28-04-2025#}
                              
                                <td class="text-left">
                                    <select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][return]" class="form-control">
                                      {% if product_option_value.return %}
                                          <option value="1" selected="selected">{{ text_yes }}</option>
                                          <option value="0">{{ text_no }}</option>
                                      {% else %}
                                          <option value="1">{{ text_yes }}</option>
                                          <option value="0" selected="selected">{{ text_no }}</option>
                                      {% endif %}
                                    </select>
                                </td>

                                <td class="text-left">
                                    <select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][refund]" class="form-control">
                                        {% if product_option_value.refund %}
                                            <option value="1" selected="selected">{{ text_yes }}</option>
                                            <option value="0">{{ text_no }}</option>
                                        {% else %}
                                            <option value="1">{{ text_yes }}</option>
                                            <option value="0" selected="selected">{{ text_no }}</option>
                                        {% endif %}
                                    </select>
                                </td>

                                <td class="text-left">
                                    <select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][replace]" class="form-control">
                                        {% if product_option_value.replace %}
                                            <option value="1" selected="selected">{{ text_yes }}</option>
                                            <option value="0">{{ text_no }}</option>
                                        {% else %}
                                            <option value="1">{{ text_yes }}</option>
                                            <option value="0" selected="selected">{{ text_no }}</option>
                                        {% endif %}
                                    </select>
                                </td>
                                {#return refund replace end here#}
                                 
                              <td class="text-left"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][subtract]" class="form-control">
                                  {% if product_option_value.subtract %}
                                  <option value="1" selected="selected">{{ text_yes }}</option>
                                <option value="0">{{ text_no }}</option>
                                

                                  {% else %}

                                
                                <option value="1">{{ text_yes }}</option>
                                <option value="0" selected="selected">{{ text_no }}</option>
                                

                                  {% endif %}

                              
                              </select></td>
                              <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][price_prefix]" class="form-control">
                                

                                  {% if product_option_value.price_prefix == '+' %}

                                
                                <option value="+" selected="selected">+</option>
                                

                                  {% else %}

                                
                                <option value="+">+</option>
                                

                                  {% endif %}
                                  {% if product_option_value.price_prefix == '-' %}

                                
                                <option value="-" selected="selected">-</option>
                                

                                  {% else %}

                                
                                <option value="-">-</option>
                                

                                  {% endif %}

                              
                              </select>
                              <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][price]" value="{{ product_option_value.price }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                           <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][points_prefix]" class="form-control">
                           {% if product_option_value.points_prefix == '+' %}
                           <option value="+" selected="selected">+</option>
                                

                                  {% else %}
                             <option value="+">+</option>
                                

                                  {% endif %}
                                  {% if product_option_value.points_prefix == '-' %}
                                  <option value="-" selected="selected">-</option>
                                {% else %}
                                  <option value="-">-</option>
                              {% endif %}
                                </select>
                             <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][points]" value="{{ product_option_value.points }}" placeholder="{{ entry_points }}" class="form-control" /></td>
                              <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][weight_prefix]" class="form-control">
                                

                                  {% if product_option_value.weight_prefix == '+' %}

                                
                                <option value="+" selected="selected">+</option>
                                

                                  {% else %}

                                
                                <option value="+">+</option>
                                

                                  {% endif %}
                                  {% if product_option_value.weight_prefix == '-' %}

                                
                                <option value="-" selected="selected">-</option>
                                

                                  {% else %}

                                
                                <option value="-">-</option>
                                

                                  {% endif %}

                              
                              </select>
                              <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][weight]" value="{{ product_option_value.weight }}" placeholder="{{ entry_weight }}" class="form-control" /></td>
                              <td class="text-left"><button type="button" onclick="$(this).tooltip('destroy');$('#option-value-row{{ option_value_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                            </tr>
                           {% set option_value_row = option_value_row + 1 %}
                          {% endfor %}
                          </tbody>
                          <tfoot>
                            <tr>
                              <td colspan="6"></td>
                              <td class="text-left"><button type="button" onclick="addOptionValue('{{ option_row }}');" data-toggle="tooltip" title="{{ button_option_value_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                            </tr>
                          </tfoot>
                        </table>
                      </div>
                      <select id="option-values{{ option_row }}" style="display: none;">
                        

                        {% if option_values[product_option.option_id] %}
                        {% for option_value in option_values[product_option.option_id] %}

                        
                        <option value="{{ option_value.option_value_id }}">{{ option_value.name }}</option>
                        

                        {% endfor %}
                        {% endif %}

                      
                      </select>
                      {% endif %} </div>
                    {% set option_row = option_row + 1 %}
                    {% endfor %} </div>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="tab-recurring">
              <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_recurring }}</td>
                      <td class="text-left">{{ entry_customer_group }}</td>
                      <td class="text-left"></td>
                    </tr>
                  </thead>
                  <tbody>
                    {% set recurring_row = 0 %}
                  {% for product_recurring in product_recurrings %}
                  <tr id="recurring-row{{ recurring_row }}">
                    <td class="text-left"><select name="product_recurring[{{ recurring_row }}][recurring_id]" class="form-control">
                        

                          {% for recurring in recurrings %}
                          {% if recurring.recurring_id == product_recurring.recurring_id %}

                        
                        <option value="{{ recurring.recurring_id }}" selected="selected">{{ recurring.name }}</option>
                        

                          {% else %}

                        
                        <option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>
                        

                          {% endif %}
                          {% endfor %}

                      
                      </select></td>
                    <td class="text-left"><select name="product_recurring[{{ recurring_row }}][customer_group_id]" class="form-control">
                        

                          {% for customer_group in customer_groups %}
                          {% if customer_group.customer_group_id == product_recurring.customer_group_id %}

                        
                        <option value="{{ customer_group.customer_group_id }}" selected="selected">{{ customer_group.name }}</option>
                        

                          {% else %}

                        
                        <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
                        

                          {% endif %}
                          {% endfor %}

                      
                      </select></td>
                    <td class="text-left"><button type="button" onclick="$('#recurring-row{{ recurring_row }}').remove()" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set recurring_row = recurring_row + 1 %}
                  {% endfor %}
                    </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="2"></td>
                      <td class="text-left"><button type="button" onclick="addRecurring()" data-toggle="tooltip" title="{{ button_recurring_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-discount">
              <div class="table-responsive">
                <table id="discount" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_customer_group }}</td>
                      <td class="text-right">{{ entry_min_quantity }}</td>
                      <td class="text-right">{{ entry_max_quantity }}</td>
                      <td class="text-right">{{ entry_priority }}</td>
                      <td class="text-right">{{ entry_price }}</td>
                      <td class="text-left">{{ entry_date_start }}</td>
                      <td class="text-left">{{ entry_date_end }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
                    {% set discount_row = 0 %}
                  {% for product_discount in product_discounts %}
                  <tr id="discount-row{{ discount_row }}">
                    <td class="text-left"><select name="product_discount[{{ discount_row }}][customer_group_id]" class="form-control">
                        {% for customer_group in customer_groups %}
                        {% if customer_group.customer_group_id == product_discount.customer_group_id %}
                        <option value="{{ customer_group.customer_group_id }}" selected="selected">{{ customer_group.name }}</option>
                        {% else %}
                        <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
                        {% endif %}
                        {% endfor %}
                      </select></td>
                    <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][quantity]" value="{{ product_discount.quantity }}" placeholder="{{ entry_min_quantity }}" class="form-control" /></td>
                    <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][max_quantity]" value="{{ product_discount.max_quantity }}" placeholder="{{ entry_max_quantity }}" class="form-control" /></td>
                    <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][priority]" value="{{ product_discount.priority }}" placeholder="{{ entry_priority }}" class="form-control" /></td>
                    <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][price]" value="{{ product_discount.price }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                    <td class="text-left" style="width: 20%;"><div class="input-group date">
                        <input type="text" name="product_discount[{{ discount_row }}][date_start]" value="{{ product_discount.date_start }}" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                        </span></div></td>
                    <td class="text-left" style="width: 20%;"><div class="input-group date">
                        <input type="text" name="product_discount[{{ discount_row }}][date_end]" value="{{ product_discount.date_end }}" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                        </span></div></td>
                    <td class="text-left"><button type="button" onclick="$('#discount-row{{ discount_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set discount_row = discount_row + 1 %}
                  {% endfor %}
                    </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="6"></td>
                      <td class="text-left"><button type="button" onclick="addDiscount();" data-toggle="tooltip" title="{{ button_discount_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
				
				
				
            </div>
            <div class="tab-pane" id="tab-special">
              <div class="table-responsive">
                <table id="special" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_customer_group }}</td>
                      <td class="text-right">{{ entry_priority }}</td>
                      <td class="text-right">{{ entry_price }}</td>
                      <td class="text-left">{{ entry_date_start }}</td>
                      <td class="text-left">{{ entry_date_end }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
                 {% set special_row = 0 %}
                  {% for product_special in product_specials %}
                    <tr id="special-row{{ special_row }}">
                      <td class="text-left"><select name="product_special[{{ special_row }}][customer_group_id]" class="form-control">
                          {% for customer_group in customer_groups %}
                          {% if customer_group.customer_group_id == product_special.customer_group_id %}
                          <option value="{{ customer_group.customer_group_id }}" selected="selected">{{ customer_group.name }}</option>
                          {% else %}

                        
                        <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
                        

                          {% endif %}
                          {% endfor %}
                        </select></td>
                      <td class="text-right"><input type="text" name="product_special[{{ special_row }}][priority]" value="{{ product_special.priority }}" placeholder="{{ entry_priority }}" class="form-control" /></td>
                      <td class="text-right"><input type="text" name="product_special[{{ special_row }}][price]" value="{{ product_special.price }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                      <td class="text-left" style="width: 20%;"><div class="input-group date">
                          <input type="text" name="product_special[{{ special_row }}][date_start]" value="{{ product_special.date_start }}" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                          </span></div></td>
                      <td class="text-left" style="width: 20%;"><div class="input-group date">
                          <input type="text" name="product_special[{{ special_row }}][date_end]" value="{{ product_special.date_end }}" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                          </span></div></td>
                      <td class="text-left"><button type="button" onclick="$('#special-row{{ special_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                    </tr>
                    {% set special_row = special_row + 1 %}
                  {% endfor %}
                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="5"></td>
                      <td class="text-left"><button type="button" onclick="addSpecial();" data-toggle="tooltip" title="{{ button_special_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            {#faq starts #}
            <div class="tab-pane" id="tab-faq">
              <div class="form-group">
                <label class="col-sm-2 control-label">Product FAQs</label>
                <div class="col-sm-10">
                  <div id="faq-list">

                    {% for faq in product_faqs %}
                    <div class="faq-entry well">
                      <button type="button" class="btn btn-danger remove-faq pull-right" style="margin-bottom: 5px;"><i class="fa fa-minus-circle"></i>
                        Remove</button>
                      <div class="form-group">
                         
                        <label>Question {{ loop.index }}</label>
                        <input type="text" name="product_faq[{{ loop.index0 }}][question]" value="{{ faq.question }}"
                          class="form-control" />
                      </div>
                      <div class="form-group">
                        <label>Answer</label>
                        <textarea name="product_faq[{{ loop.index0 }}][answer]" class="form-control"
                          rows="3">{{ faq.answer }}</textarea>
                      </div>
                      <input type="hidden" name="product_faq[{{ loop.index0 }}][language_id]"
                        value="{{ faq.language_id }}" />
                     
                    </div>
                    {% endfor %}
                  </div>
                  <button type="button" id="add-faq" class="btn btn-primary pull-right" style="margin-right: 10px;"><i class="fa fa-plus-circle"></i> Add
                    FAQ</button>
                </div>
              </div>
            </div>
            {#faq ends #}
            <div class="tab-pane" id="tab-image">
              <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_image }}</td>
                    </tr>
                  </thead>
                  
                  <tbody>
                    <tr>
                      <td class="text-left"><a href="" id="thumb-image" data-toggle="image" class="img-thumbnail"><img src="{{ thumb }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a><input type="hidden" name="image" value="{{ image }}" id="input-image" />
                         {#----added code into exsiting td related to image required during product add on 19-04-2025 ----#}
                        {% if error_image %}
						  <div class="text-danger">{{ error_image }}</div>
					    {% endif %}
					    {#--------------------------------------------------------------------------------------------------#}
                      </td>
                  </tr>
                  </tbody>
                </table>
              </div>
              <div class="table-responsive">
                <table id="images" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_additional_image }}</td>
                      <td class="text-right">{{ entry_sort_order }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
                   {% set image_row = 0 %}
                  {% for product_image in product_images %}
                    <tr id="image-row{{ image_row }}">
                      <td class="text-left"><a href="" id="thumb-image{{ image_row }}" data-toggle="image" class="img-thumbnail"><img src="{{ product_image.thumb }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a>
                      <input type="hidden" name="product_image[{{ image_row }}][image]" value="{{ product_image.image }}" id="input-image{{ image_row }}" /></td>
                      <td class="text-right"><input type="text" name="product_image[{{ image_row }}][sort_order]" value="{{ product_image.sort_order }}" placeholder="{{ entry_sort_order }}" class="form-control" /></td>
                      <td class="text-left"><button type="button" onclick="$('#image-row{{ image_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                    </tr>
                   {% set image_row = image_row + 1 %}
                  {% endfor %}
                  </tbody>
                  <tfoot>
                    <tr>
                     {# ----added code into exsiting td related to image required during product add on 19-04-2025 ----#}
                      <td colspan="2">
          {#                {% if error_product_image[image_row] %}#}
    						{#<div class="text-danger">{{ error_product_image[image_row] }}</div>#}
    					 {# {% endif %}#}
          {#                {% if error_dynamic_image_count %}#}
        		{#				<div class="alert-warning">{{ error_dynamic_image_count }}</div>#}
        		{#		  {% endif %}#}
        		        {#-------- updated on 30-04-2025-------------#}
            		    {#<div id="image-count-warning" class="alert alert-warning" style="display:none;"></div>#}
            		    {#----------------------------------------------------#}
                      </td>
                      {#-------------------------------------------------------------------------------------------------------#}
                      <td class="text-left"><button type="button" onclick="addImage();" data-toggle="tooltip" title="{{ button_image_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-reward">
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-points"><span data-toggle="tooltip" title="{{ help_points }}">{{ entry_points }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="points" value="{{ points }}" placeholder="{{ entry_points }}" id="input-points" class="form-control" />
                </div>
              </div>
              <div class="table-responsive">
                <table class="table table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_customer_group }}</td>
                      <td class="text-right">{{ entry_reward }}</td>
                    </tr>
                  </thead>
                  <tbody>
                   {% for customer_group in customer_groups %}
                   <tr>
                    <td class="text-left">{{ customer_group.name }}</td>
                    <td class="text-right"><input type="text" name="product_reward[{{ customer_group.customer_group_id }}][points]" value="{{ product_reward[customer_group.customer_group_id] ? product_reward[customer_group.customer_group_id].points }}" class="form-control" /></td>
                  </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
              <div class="tab-pane" id="tab-seo">
              <div class="alert alert-info"><i class="fa fa-info-circle"></i> {{ text_keyword }}</div>            
              <div class="table-responsive">
                <table class="table table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_store }}</td>
		      <td class="text-left">{{ entry_keyword }}</td>
                    </tr>
                  </thead>
                  <tbody>
                  {% for store in stores %}
                  <tr>
                    <td class="text-left">{{ store.name }}</td>
                    <td class="text-left">{% for language in languages %}
                      <div class="input-group"><span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span>
                        {# added id in the following input field 01-04-2025#}
                        <input type="text" id="seoUrlInput"  name="product_seo_url[{{ store.store_id }}][{{ language.language_id }}]" value="{% if product_seo_url[store.store_id][language.language_id] %}{{ product_seo_url[store.store_id][language.language_id] }}{% endif %}" placeholder="{{ entry_keyword }}" class="form-control" />
                      </div>
                        {# added following line 01-04-2025 ------#}
                        {#<small id="seoUrlError" style="color: red; display: none;">Spaces are not allowed in the SEO URL!</small>#}
                        <small id="seoUrlError" style="color: red; display: none;"></small>
                         
                         
                      {% if error_keyword[store.store_id][language.language_id] %}
                      <div class="text-danger">{{ error_keyword[store.store_id][language.language_id] }}</div>
                      {% endif %} 
                      {% endfor %}</td>
                  </tr>
                  {% endfor %}
                    </tbody>
                  
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-design">
              <div class="table-responsive">
                <table class="table table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_store }}</td>
                      <td class="text-left">{{ entry_layout }}</td>
                    </tr>
                  </thead>
                  <tbody>
                   {% for store in stores %}
                    <tr>
                      <td class="text-left">{{ store.name }}</td>
                      <td class="text-left"><select name="product_layout[0]" class="form-control">
                          <option value=""></option>
                          {% for layout in layouts %}
                          {% if product_layout[store.store_id] and product_layout[store.store_id] == layout.layout_id %}
                          <option value="{{ layout.layout_id }}" selected="selected">{{ layout.name }}</option>
                          {% else %}
                          <option value="{{ layout.layout_id }}">{{ layout.name }}</option>
                          {% endif %}
                          {% endfor %}
                        </select></td>
                    </tr>
                     {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
			  
			  
          </div>
        </form>
      </div>
    </div>
  </div>
<link href="view/javascript/codemirror/lib/codemirror.css" rel="stylesheet" />
  <link href="view/javascript/codemirror/theme/monokai.css" rel="stylesheet" />
  <script type="text/javascript" src="view/javascript/codemirror/lib/codemirror.js"></script> 
  <script type="text/javascript" src="view/javascript/codemirror/lib/xml.js"></script> 
  <script type="text/javascript" src="view/javascript/codemirror/lib/formatting.js"></script> 
  <script type="text/javascript" src="view/javascript/summernote/summernote.js"></script>
  <link href="view/javascript/summernote/summernote.css" rel="stylesheet" />
  <script type="text/javascript" src="view/javascript/summernote/summernote-image-attributes.js"></script> 
  <script type="text/javascript" src="view/javascript/summernote/opencart.js"></script>
<script type="text/javascript"><!--
	  
// Seller
$('input[name=\'vendor\']').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'index.php?route=vendor/product/seller_autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				json.unshift({
					vendor_id: 0,
					/* 13 02 2020 vendorname */
					vendorname: '{{ text_none }}'
				});

				response($.map(json, function(item) {
					return {
						label: item['vendorname'],
						value: item['vendor_id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('input[name=\'vendor\']').val(item['label']);
		$('input[name=\'vendor_id\']').val(item['value']);
	}
});
</script>	

	
<script type="text/javascript"><!--
	  

// Manufacturer
{# updated on 27-04-2025----------------------- #}
// commented on 14/07/2025
$('input[name=\'manufacturer\']').autocomplete({
	'source': function(request, response) {
    ////////-new
    let vendor_id = $('input[name="vendor_id"]').val();////NEW
		$.ajax({
		url: 'index.php?route=vendor/product/getManufacturersByVendorId&user_token={{ user_token }}',
			type: 'get',
			data: {
				filter_name: request, // NEW
				vendor_id: vendor_id  //NEW
			},

      dataType: 'json',
			success: function(json) {
        json.unshift({
					manufacturer_id: 0,
					name: '{{ text_none }}'
				});


				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['manufacturer_id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('input[name=\'manufacturer\']').val(item['label']);
		$('input[name=\'manufacturer_id\']').val(item['value']);
	}
});
// -----------------------------------------------end here on 14/07/2025

// Manufacturer
// $('input[name=\'manufacturer\']').autocomplete({
// // $('#input-manufacturer').autocomplete({
// 	'source': function(request, response) {
// 		$.ajax({
// 			url: 'index.php?route=catalog/manufacturer/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
// 			dataType: 'json',
// 			success: function(json) {
// 				json.unshift({
// 					manufacturer_id: 0,
// 					name: '{{ text_none }}'
// 				});

// 				response($.map(json, function(item) {
// 					return {
// 						label: item['name'],
// 						value: item['manufacturer_id']
// 					}
// 				}));
// 			}
// 		});
// 	},
// 	'select': function(item) {
// 		$('input[name=\'manufacturer\']').val(item['label']);
// 		$('input[name=\'manufacturer_id\']').val(item['value']);
	
// //     'select': function(item) {
// // 		$('input[name=\'manufacturer\']').val(item['label']);
// // 		$('input[name=\'manufacturer_id\']').val(item['value']);

// // 		// Remove error styling
// // 		$('#input-manufacturer')
// // 			.removeClass('is-invalid')
// // 			.removeClass('error')
// // 			.css('border', '');
		
// // 		// Remove server-rendered error message
// // 		$('#input-manufacturer').closest('.form-group').find('.text-danger').remove();

// // 		// Optional
// // 		$('#input-manufacturer').trigger('change');
// 	}
// });
// $('input[name=\'manufacturer\']').autocomplete({
//   source: function(request, response) {
//     $.ajax({
//       url: 'index.php?route=catalog/manufacturer/autocomplete&filter_name=' + encodeURIComponent(request),
//       dataType: 'json',
//       success: function(json) {
//         json.unshift({
//           manufacturer_id: 0,
//           name: '{{ text_none }}'
//         });

//         response($.map(json, function(item) {
//           return {
//             label: item['name'],
//             value: item['manufacturer_id']
//           }
//         }));
//       }
//     });
//   },
//   select: function(item) {
//     $('input[name=\'manufacturer\']').val(item['label']);
//     $('input[name=\'manufacturer_id\']').val(item['value']);

//     // Remove red border and error message
//     var formGroup = $('input[name=\'manufacturer\']').closest('.form-group');
//     formGroup.removeClass('has-error'); // Remove red border
//     formGroup.find('.text-danger').text(''); // Clear the error message
//   }
// });
// $('#input-manufacturer').autocomplete({
// 	'source': function(request, response) {
// 		$.ajax({
// 			url: 'index.php?route=catalog/manufacturer/autocomplete&user_token={{ user_token }}&filter_name=' + encodeURIComponent(request),
// 			dataType: 'json',
// 			success: function(json) {
// 				json.unshift({
// 					manufacturer_id: 0,
// 					name: '{{ text_none }}'
// 				});

// 				response($.map(json, function(item) {
// 					return {
// 						label: item['name'],
// 						value: item['manufacturer_id']
// 					}
// 				}));
// 			}
// 		});
// 	},
// 	'select': function(item) {
// 		$('#input-manufacturer').val(item['label']);
// 		$('input[name="manufacturer_id"]').val(item['value']);

// 		// Remove error styling
// 		$('#input-manufacturer')
// 			.removeClass('is-invalid')
// 			.removeClass('error')
// 			.css('border', '');
		
// 		// Remove server-rendered error message
// 		$('#input-manufacturer').closest('.form-group').find('.text-danger').remove();

// 		// Optional
// 		$('#input-manufacturer').trigger('change');
// 	}
// });
// ------------------------------------------------------------------------

// Category
$('input[name=\'category\']').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'index.php?route=catalog/category/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['category_id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('input[name=\'category\']').val('');

		$('#product-category' + item['value']).remove();

		$('#product-category').append('<div id="product-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_category[]" value="' + item['value'] + '" /></div>');
	}
});

$('#product-category').delegate('.fa-minus-circle', 'click', function() {
	$(this).parent().remove();
});

// Filter
$('input[name=\'filter\']').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'index.php?route=catalog/filter/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['filter_id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('input[name=\'filter\']').val('');

		$('#product-filter' + item['value']).remove();

		$('#product-filter').append('<div id="product-filter' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_filter[]" value="' + item['value'] + '" /></div>');
	}
});

$('#product-filter').delegate('.fa-minus-circle', 'click', function() {
	$(this).parent().remove();
});

// Downloads
$('input[name=\'download\']').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'index.php?route=catalog/download/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['download_id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('input[name=\'download\']').val('');

		$('#product-download' + item['value']).remove();

		$('#product-download').append('<div id="product-download' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_download[]" value="' + item['value'] + '" /></div>');
	}
});

$('#product-download').delegate('.fa-minus-circle', 'click', function() {
	$(this).parent().remove();
});

// Related
$('input[name=\'related\']').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'index.php?route=vendor/product/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						label: item['name'],
						value: item['product_id']
					}
				}));
			}
		});
	},
	'select': function(item) {
		$('input[name=\'related\']').val('');

		$('#product-related' + item['value']).remove();

		$('#product-related').append('<div id="product-related' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_related[]" value="' + item['value'] + '" /></div>');
	}
});

$('#product-related').delegate('.fa-minus-circle', 'click', function() {
	$(this).parent().remove();
});
//--></script>
  <script type="text/javascript"><!--
var attribute_row = {{ attribute_row }};

function addAttribute() {
    html  = '<tr id="attribute-row' + attribute_row + '">';
	html += '  <td class="text-left" style="width: 20%;"><input type="text" name="product_attribute[' + attribute_row + '][name]" value="" placeholder="{{ entry_attribute }}" class="form-control" /><input type="hidden" name="product_attribute[' + attribute_row + '][attribute_id]" value="" /></td>';
	html += '  <td class="text-left">';
	{% for language in languages %}
	html += '<div class="input-group"><span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span><textarea name="product_attribute[' + attribute_row + '][product_attribute_description][{{ language.language_id }}][text]" rows="5" placeholder="{{ entry_text }}" class="form-control"></textarea></div>';
    {% endfor %}
	html += '  </td>';
	html += '  <td class="text-left"><button type="button" onclick="$(\'#attribute-row' + attribute_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
    html += '</tr>';

	$('#attribute tbody').append(html);

	attributeautocomplete(attribute_row);

	attribute_row++;
}

function attributeautocomplete(attribute_row) {
	$('input[name=\'product_attribute[' + attribute_row + '][name]\']').autocomplete({
		'source': function(request, response) {
			$.ajax({
				url: 'index.php?route=catalog/attribute/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
				dataType: 'json',
				success: function(json) {
					response($.map(json, function(item) {
						return {
							category: item.attribute_group,
							label: item.name,
							value: item.attribute_id
						}
					}));
				}
			});
		},
		'select': function(item) {
			$('input[name=\'product_attribute[' + attribute_row + '][name]\']').val(item['label']);
			$('input[name=\'product_attribute[' + attribute_row + '][attribute_id]\']').val(item['value']);
		}
	});
}

$('#attribute tbody tr').each(function(index, element) {
	attributeautocomplete(index);
});
//--></script>
  <script type="text/javascript"><!--
var option_row = {{ option_row }};

$('input[name=\'option\']').autocomplete({
	'source': function(request, response) {
		$.ajax({
			url: 'index.php?route=catalog/option/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
			dataType: 'json',
			success: function(json) {
				response($.map(json, function(item) {
					return {
						category: item['category'],
						label: item['name'],
						value: item['option_id'],
						type: item['type'],
						option_value: item['option_value']
					}
				}));
			}
		});
	},
	'select': function(item) {
		html  = '<div class="tab-pane" id="tab-option' + option_row + '">';
		html += '	<input type="hidden" name="product_option[' + option_row + '][product_option_id]" value="" />';
		html += '	<input type="hidden" name="product_option[' + option_row + '][name]" value="' + item['label'] + '" />';
		html += '	<input type="hidden" name="product_option[' + option_row + '][option_id]" value="' + item['value'] + '" />';
		html += '	<input type="hidden" name="product_option[' + option_row + '][type]" value="' + item['type'] + '" />';

		html += '	<div class="form-group">';
		html += '	  <label class="col-sm-2 control-label" for="input-required' + option_row + '">{{ entry_required }}</label>';
		html += '	  <div class="col-sm-10"><select name="product_option[' + option_row + '][required]" id="input-required' + option_row + '" class="form-control">';
		html += '	      <option value="1">{{ text_yes }}</option>';
		html += '	      <option value="0">{{ text_no }}</option>';
		html += '	  </select></div>';
		html += '	</div>';

		if (item['type'] == 'text') {
			html += '	<div class="form-group">';
			html += '	  <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
			html += '	  <div class="col-sm-10"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control" /></div>';
			html += '	</div>';
		}

		if (item['type'] == 'textarea') {
			html += '	<div class="form-group">';
			html += '	  <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
			html += '	  <div class="col-sm-10"><textarea name="product_option[' + option_row + '][value]" rows="5" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control"></textarea></div>';
			html += '	</div>';
		}

		if (item['type'] == 'file') {
			html += '	<div class="form-group" style="display: none;">';
			html += '	  <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
			html += '	  <div class="col-sm-10"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control" /></div>';
			html += '	</div>';
		}

		if (item['type'] == 'date') {
			html += '	<div class="form-group">';
			html += '	  <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
			html += '	  <div class="col-sm-3"><div class="input-group date"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
			html += '	</div>';
		}

		if (item['type'] == 'time') {
			html += '	<div class="form-group">';
			html += '	  <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
			html += '	  <div class="col-sm-10"><div class="input-group time"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" data-date-format="HH:mm" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
			html += '	</div>';
		}

		if (item['type'] == 'datetime') {
			html += '	<div class="form-group">';
			html += '	  <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
			html += '	  <div class="col-sm-10"><div class="input-group datetime"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
			html += '	</div>';
		}

		if (item['type'] == 'select' || item['type'] == 'radio' || item['type'] == 'checkbox' || item['type'] == 'image') {
			html += '<div class="table-responsive">';
			html += '  <table id="option-value' + option_row + '" class="table table-striped table-bordered table-hover">';
			html += '  	 <thead>';
			html += '      <tr>';
			html += '        <td class="text-left">{{ entry_option_value }}</td>';
			html += '        <td class="text-right">{{ entry_quantity }}</td>';
// 			code added for return refund replace on 28-04-2025
            // html += '        <td class="text-right">{{ entry_return }}</td>';
            // html += '        <td class="text-right">{{ entry_refund }}</td>';
            // html += '        <td class="text-right">{{ entry_replace }}</td>';
            // return refund replace end here
			html += '        <td class="text-left">{{ entry_subtract }}</td>';
			html += '        <td class="text-right">{{ entry_price }}</td>';
			html += '        <td class="text-right">{{ entry_option_points }}</td>';
			html += '        <td class="text-right">{{ entry_weight }}</td>';
			html += '        <td></td>';
			html += '      </tr>';
			html += '  	 </thead>';
			html += '  	 <tbody>';
			html += '    </tbody>';
			html += '    <tfoot>';
			html += '      <tr>';
			html += '        <td colspan="6"></td>';
			html += '        <td class="text-left"><button type="button" onclick="addOptionValue(' + option_row + ');" data-toggle="tooltip" title="{{ button_option_value_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>';
			html += '      </tr>';
			html += '    </tfoot>';
			html += '  </table>';
			html += '</div>';

            html += '  <select id="option-values' + option_row + '" style="display: none;">';

            for (i = 0; i < item['option_value'].length; i++) {
				html += '  <option value="' + item['option_value'][i]['option_value_id'] + '">' + item['option_value'][i]['name'] + '</option>';
            }

            html += '  </select>';
			html += '</div>';
		}

		$('#tab-option .tab-content').append(html);

		$('#option > li:last-child').before('<li><a href="#tab-option' + option_row + '" data-toggle="tab"><i class="fa fa-minus-circle" onclick="$(\'a[href=\\\'#tab-option' + option_row + '\\\']\').parent().remove(); $(\'#tab-option' + option_row + '\').remove(); $(\'#option a:first\').tab(\'show\')"></i> ' + item['label'] + '</li>');

		$('#option a[href=\'#tab-option' + option_row + '\']').tab('show');
		
		$('[data-toggle=\'tooltip\']').tooltip({
			container: 'body',
			html: true
		});

		$('.date').datetimepicker({
			pickTime: false
		});

		$('.time').datetimepicker({
			pickDate: false
		});

		$('.datetime').datetimepicker({
			pickDate: true,
			pickTime: true
		});

		option_row++;
	}
});
//--></script>
  <script type="text/javascript"><!--
var option_value_row = {{ option_value_row }};

function addOptionValue(option_row) {
	html  = '<tr id="option-value-row' + option_value_row + '">';
	html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][option_value_id]" class="form-control">';
	html += $('#option-values' + option_row).html();
	html += '  </select><input type="hidden" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][product_option_value_id]" value="" /></td>';
	html += '  <td class="text-right"><input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][quantity]" value="" placeholder="{{ entry_quantity }}" class="form-control" /></td>';
// 	code added for return refund replace on 28-04-2025
// 	html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][return]" class="form-control">';
// 	html += '    <option value="1">{{ text_yes }}</option>';
// 	html += '    <option value="0">{{ text_no }}</option>';
// 	html += '  </select></td>';
//     html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][refund]" class="form-control">';
// 	html += '    <option value="1">{{ text_yes }}</option>';
// 	html += '    <option value="0">{{ text_no }}</option>';
// 	html += '  </select></td>';
//     html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][replace]" class="form-control">';
// 	html += '    <option value="1">{{ text_yes }}</option>';
// 	html += '    <option value="0">{{ text_no }}</option>';
// 	html += '  </select></td>';
// 	  return refund replace end here
	html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][subtract]" class="form-control">';
	html += '    <option value="1">{{ text_yes }}</option>';
	html += '    <option value="0">{{ text_no }}</option>';
	html += '  </select></td>';
	html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price_prefix]" class="form-control">';
	html += '    <option value="+">+</option>';
	html += '    <option value="-">-</option>';
	html += '  </select>';
	html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
	html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][points_prefix]" class="form-control">';
	html += '    <option value="+">+</option>';
	html += '    <option value="-">-</option>';
	html += '  </select>';
	html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][points]" value="" placeholder="{{ entry_points }}" class="form-control" /></td>';
	html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight_prefix]" class="form-control">';
	html += '    <option value="+">+</option>';
	html += '    <option value="-">-</option>';
	html += '  </select>';
	html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight]" value="" placeholder="{{ entry_weight }}" class="form-control" /></td>';
	html += '  <td class="text-left"><button type="button" onclick="$(this).tooltip(\'destroy\');$(\'#option-value-row' + option_value_row + '\').remove();" data-toggle="tooltip" rel="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
	html += '</tr>';

	$('#option-value' + option_row + ' tbody').append(html);
        $('[rel=tooltip]').tooltip();

	option_value_row++;
}
//--></script>
  <script type="text/javascript"><!--
var discount_row = {{ discount_row }};

function addDiscount() {
	html  = '<tr id="discount-row' + discount_row + '">';
    html += '  <td class="text-left"><select name="product_discount[' + discount_row + '][customer_group_id]" class="form-control">';
    {% for customer_group in customer_groups %}
    html += '    <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name|escape('js') }}</option>';
    {% endfor %}
    html += '  </select></td>';
    html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][quantity]" value="" placeholder="{{ entry_min_quantity }}" class="form-control" /></td>';
    html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][max_quantity]" value="" placeholder="{{ entry_max_quantity }}" class="form-control" /></td>';
    html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][priority]" value="" placeholder="{{ entry_priority }}" class="form-control" /></td>';
	html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
    html += '  <td class="text-left" style="width: 20%;"><div class="input-group date"><input type="text" name="product_discount[' + discount_row + '][date_start]" value="" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
	html += '  <td class="text-left" style="width: 20%;"><div class="input-group date"><input type="text" name="product_discount[' + discount_row + '][date_end]" value="" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
	html += '  <td class="text-left"><button type="button" onclick="$(\'#discount-row' + discount_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
	html += '</tr>';

	$('#discount tbody').append(html);

	$('.date').datetimepicker({
		pickTime: false
	});

	discount_row++;
}
//--></script>
  <script type="text/javascript"><!--
var special_row = {{ special_row }};

function addSpecial() {
	html  = '<tr id="special-row' + special_row + '">';
    html += '  <td class="text-left"><select name="product_special[' + special_row + '][customer_group_id]" class="form-control">';
    {% for customer_group in customer_groups %}
    html += '      <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name|escape('js') }}</option>';
    {% endfor %}
    html += '  </select></td>';
    html += '  <td class="text-right"><input type="text" name="product_special[' + special_row + '][priority]" value="" placeholder="{{ entry_priority }}" class="form-control" /></td>';
	html += '  <td class="text-right"><input type="text" name="product_special[' + special_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
    html += '  <td class="text-left" style="width: 20%;"><div class="input-group date"><input type="text" name="product_special[' + special_row + '][date_start]" value="" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
	html += '  <td class="text-left" style="width: 20%;"><div class="input-group date"><input type="text" name="product_special[' + special_row + '][date_end]" value="" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
	html += '  <td class="text-left"><button type="button" onclick="$(\'#special-row' + special_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
	html += '</tr>';

	$('#special tbody').append(html);

	$('.date').datetimepicker({
		pickTime: false
	});

	special_row++;
}
//--></script>
  <script type="text/javascript"><!--
var image_row = {{ image_row }};

function addImage() {
	html  = '<tr id="image-row' + image_row + '">';
	html += '  <td class="text-left"><a href="" id="thumb-image' + image_row + '"data-toggle="image" class="img-thumbnail"><img src="{{ placeholder }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a><input type="hidden" name="product_image[' + image_row + '][image]" value="" id="input-image' + image_row + '" /></td>';
	html += '  <td class="text-right"><input type="text" name="product_image[' + image_row + '][sort_order]" value="" placeholder="{{ entry_sort_order }}" class="form-control" /></td>';
	html += '  <td class="text-left"><button type="button" onclick="$(\'#image-row' + image_row  + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
	html += '</tr>';

	$('#images tbody').append(html);

	image_row++;
}
//--></script>
  <script type="text/javascript"><!--
var recurring_row = {{ recurring_row }};

function addRecurring() {
	recurring_row++;

	html  = '';
	html += '<tr id="recurring-row' + recurring_row + '">';
	html += '  <td class="left">';
	html += '    <select name="product_recurring[' + recurring_row + '][recurring_id]" class="form-control">>';
	{% for recurring in recurrings %}
	html += '      <option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>';
	{% endfor %}
	html += '    </select>';
	html += '  </td>';
	html += '  <td class="left">';
	html += '    <select name="product_recurring[' + recurring_row + '][customer_group_id]" class="form-control">>';
	{% for customer_group in customer_groups %}
	html += '      <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>';
	{% endfor %}
	html += '    <select>';
	html += '  </td>';
	html += '  <td class="left">';
	html += '    <a onclick="$(\'#recurring-row' + recurring_row + '\').remove()" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></a>';
	html += '  </td>';
	html += '</tr>';

	$('#tab-recurring table tbody').append(html);
}
//--></script>
  <script type="text/javascript"><!--
$('.date').datetimepicker({
	pickTime: false
});

$('.time').datetimepicker({
	pickDate: false
});

$('.datetime').datetimepicker({
	pickDate: true,
	pickTime: true
});
//--></script>
  <script type="text/javascript"><!--
$('#language a:first').tab('show');
$('#option a:first').tab('show');
//--></script></div>

{#added on 01-04-2025#}
    <script>
// 		document.getElementById("seoUrlInput").addEventListener("input", function() {
// 		    let inputField = this;
// 		    let errorText = document.getElementById("seoUrlError");
		
// 		    if (/\s/.test(inputField.value)) { 
// 		        errorText.style.display = "block";
// 		        inputField.value = inputField.value.replace(/\s/g, ''); 
// 		    } else {
// 		        errorText.style.display = "none";
// 		    }
// 		});

// replace on 16 may 2025
     document.getElementById("seoUrlInput").addEventListener("input", function () {
    		let inputField = this;
    		let errorText = document.getElementById("seoUrlError");
    
    		// Allow only letters, numbers, and hyphen
    		let validValue = inputField.value.replace(/[^a-zA-Z0-9-]/g, '');
    
    		if (inputField.value !== validValue) {
    			errorText.style.display = "block";
    			errorText.textContent = "Only letters, numbers, and hyphens (-) are allowed.";
    			inputField.value = validValue;
    		} else {
    			errorText.style.display = "none";
    			errorText.textContent = "";
    		}
    	});
		</script>
 {#---------------------------------------------------#}
 
 {# added on 04-04-2025------------------#}
 <script>
	document.addEventListener("DOMContentLoaded", function () { // Get input fields
    let lengthInput = document.getElementById("input-length");
    let widthInput = document.getElementById("input-width");
    let heightInput = document.getElementById("input-height");
    let volumetricWeightInput = document.getElementById("input-volumetric-weight");
    let actualWeightInput = document.getElementById("input-weight");

    // Function to calculate volumetric weight
    function calculateVolumetricWeight() {
    let length = parseFloat(lengthInput.value) || 0;
    let width = parseFloat(widthInput.value) || 0;
    let height = parseFloat(heightInput.value) || 0;
    let volumetricDivisor = 5000; // From the image formula updated on 02-06-2025

    if (length > 0 && width > 0 && height > 0) {
    let volumetricWeightkg = (length * width * height) / volumetricDivisor;
    let volumetricWeightG = volumetricWeightkg * 1000;
    // Convert to grams
    // Update input field

    volumetricWeightInput.value = Math.round(volumetricWeightG); // Rounded value
    } else {
    volumetricWeightInput.value = ""; // Clear if any field is empty
    }
  }

  // Attach event listeners to trigger calculation when values change
  lengthInput.addEventListener("input", calculateVolumetricWeight);
  widthInput.addEventListener("input", calculateVolumetricWeight);
  heightInput.addEventListener("input", calculateVolumetricWeight);
});
</script>
 {#------------------------------------------------------#}
 
{#pincode and courier charges ----date 17-04-25#}
<script>
document.addEventListener("DOMContentLoaded", function () {
	const deliveryOption = document.getElementById("deliveryOption");
	const customInputDiv = document.getElementById("customInputDiv");
	const pincodeInput = document.getElementById("pincodeInput");
	const errorDiv = document.getElementById("error");

	const nationalChargesContainer = document.getElementById("nationalChargesContainer");
	const zonalChargesContainer = document.getElementById("zonalChargesContainer");
	const localChargesContainer = document.getElementById("localChargesContainer");

	const nationalCharges = document.getElementById("nationalCharges");
	const zonalCharges = document.getElementById("zonalCharges");
	const localCharges = document.getElementById("localCharges");

	const nationalHidden = document.getElementById("nationalHidden");
	const zonalHidden = document.getElementById("zonalHidden");
	const localHidden = document.getElementById("localHidden");

	const selectedCity = document.getElementById("selectedCity");
	const selectedState = document.getElementById("selectedState");
	const freeDeliverySection = document.getElementById("freeDeliverySection");

	function updateChargesView() {
		nationalChargesContainer.style.display = "none";
		zonalChargesContainer.style.display = "none";
		localChargesContainer.style.display = "none";

		if (deliveryOption.value === "local") {
			localChargesContainer.style.display = "block";
			selectedCity.style.display = "block";
			selectedState.style.display = "none";
			nationalCharges.value = null;
			zonalCharges.value = null;
		} else if (deliveryOption.value === "zonal") {
			zonalChargesContainer.style.display = "block";
			localChargesContainer.style.display = "block";
			selectedState.style.display = "block";
			selectedCity.style.display = "none";
			nationalCharges.value = null;
		} else {
			nationalChargesContainer.style.display = "block";
			zonalChargesContainer.style.display = "block";
			localChargesContainer.style.display = "block";
			selectedState.style.display = "none";
			selectedCity.style.display = "none";
		}
	}

	function toggleCustomInput() {
		if (deliveryOption.value === "custom") {
			customInputDiv.style.display='block';
		} else {
			customInputDiv.style.display='none';
			errorDiv.textContent = "";
			pincodeInput.value = "";
		}
	}

	function checkLocalCharges() {
		localHidden.style.display = (Number(localCharges.value) > 90) ? 'block' : 'none';
		if ((deliveryOption.value !== "" && localCharges.value.trim() !== "" && Number(localCharges.value) <= 90)) {
			freeDeliverySection.style.display='block';
		} else {
			freeDeliverySection.style.display='none';
		}
	}

	function checkZonalCharges() {
		zonalHidden.style.display = (Number(zonalCharges.value) > 140) ? 'block' : 'none';
	}

	function checkNationalCharges() {
		nationalHidden.style.display = (Number(nationalCharges.value) > 180) ? 'block' : 'none';
	}

	// Initial validations
	checkLocalCharges();
	checkZonalCharges();
	checkNationalCharges();
	updateChargesView();
	toggleCustomInput();

	// Listeners
	localCharges.addEventListener("change", checkLocalCharges);
	zonalCharges.addEventListener("change", checkZonalCharges);
	nationalCharges.addEventListener("change", checkNationalCharges);

	deliveryOption.addEventListener("change", () => {
		updateChargesView();
		toggleCustomInput();
	});

	pincodeInput.addEventListener("change", () => {
		const selectedOption = deliveryOption.value;

		if (selectedOption === "custom") {
			const pincodes = pincodeInput.value.split(",").map((p) => p.trim()).filter(Boolean);

			if (pincodes.length > 50) {
				errorDiv.textContent = "You can enter a maximum of 50 pincodes.";
				return;
			}

			const invalid = pincodes.filter((p) => !/^\d{6}$/.test(p));
			if (invalid.length > 0) {
				errorDiv.textContent = "Invalid pincodes: " + invalid.join(", ");
				return;
			}

			errorDiv.textContent = "";
			alert("Selected custom pincodes:\n" + pincodes.join(", "));
		} else {
			alert("Delivery option selected: " + deliveryOption.options[deliveryOption.selectedIndex].text);
		}
	});

	document.getElementById("freeDeliveryInput").addEventListener("input", function () {
		this.value = this.value.replace(/[^0-9]/g, '');
	});
	document.getElementById("localCharges").addEventListener("input", function () {
		this.value = this.value.replace(/[^0-9]/g, '');
	});
	document.getElementById("zonalCharges").addEventListener("input", function () {
		this.value = this.value.replace(/[^0-9]/g, '');
	});
	document.getElementById("nationalCharges").addEventListener("input", function () {
		this.value = this.value.replace(/[^0-9]/g, '');
	});
});
</script>
{#pincode and courier charges end s#}

{#-- Chnages regarding to the image validation 23-04-2025-------------------#}
<script>
$(document).ready(function () {
    function checkImageCount() {
        let selected = 0;

        $("input[name^='product_image'][name$='[image]']").each(function () {
            if ($(this).val().trim() !== "") {
                selected++;
            }
        });

        if (selected < 3) {
            let remaining = 3 - selected;
            $("#image-count-warning")
                .text("Please select " + remaining + " more image(s) required")
                .show();
        } else {
            $("#image-count-warning").hide();
        }
    }

    // Observer setup function
    function observeField(field) {
        if (!$(field).data('observed')) {
            const observer = new MutationObserver(checkImageCount);
            observer.observe(field, { attributes: true, attributeFilter: ['value'] });
            $(field).data('observed', true);
        }
    }

    // Initial field setup
    $("input[name^='product_image'][name$='[image]']").each(function () {
        observeField(this);
    });

    // On image picker click (OpenCart), update after delay
    $(document).on('click', "a[data-toggle='image'], .img-thumbnail", function () {
        setTimeout(function () {
            $("input[name^='product_image'][name$='[image]']").each(function () {
                observeField(this); // Observe any new fields
            });
            checkImageCount();
        }, 300); // Slightly faster response
    });

    // Fallback for manual changes
    $(document).on("change", "input[name^='product_image'][name$='[image]']", function () {
        observeField(this);
        checkImageCount();
    });

    // Initial check
    checkImageCount();
});
</script>
{#--------------------------------------------------------------------#}
{#waranty starts #}


{#return policy ends #}
{#-- added on 27-04-2025---------------------------------------#}
     {#Validations for HSN Code #}
  
  <style>
    .readonly-dropdown {
      pointer-events: none;
      background-color: #e9ecef; /* Optional: make it look like a disabled input */
    }
  </style>
{#--- updated script on 30-04-2025#}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const hsnInput = document.getElementById('input-hsn');
    const hsnDescription = document.getElementById('hsn-description');
    const gstRateSelect = document.getElementById('input-gst-rate');
    const gstRateHidden = document.getElementById('gst-rate-hidden');

    //  Function to fetch and display HSN details
    function fetchHSNDetails(hsn) {
      fetch('index.php?route=vendor/hsn&user_token={{ user_token }}&hsn=' + encodeURIComponent(hsn))
        .then(response => response.json())
        .then(data => {
          if (data.success && data.data) {
            const { description, gst_rate } = data.data;
            hsnDescription.innerHTML = ` <b>Description:</b> ${description}`;

            const apiRate = parseFloat(gst_rate.toString().replace('%', '').trim());
            let matched = false;

            for (let i = 0; i < gstRateSelect.options.length; i++) {
              const optionRate = parseFloat(gstRateSelect.options[i].value.replace('%', '').trim());
              if (optionRate === apiRate) {
                gstRateSelect.selectedIndex = i;
                matched = true;
                break;
              }
            }

            gstRateHidden.value = matched ? gstRateSelect.value : '';
            if (!matched) gstRateSelect.selectedIndex = 0;

          } else {
            hsnDescription.innerHTML = `<span style="color:red;"> ${data.error || 'No GST data found.'}</span>`;
            gstRateSelect.selectedIndex = 0;
            gstRateHidden.value = '';
          }
        })
        .catch(err => {
          hsnDescription.innerHTML = `<span style="color:red;"> API error</span>`;
          console.error('API Error:', err);
        });
    }

    //  When typing a new HSN Code
    hsnInput.addEventListener('input', function () {
      const hsn = hsnInput.value.trim();
      if (!hsn) return;
      fetchHSNDetails(hsn);
    });

    //  On edit (page load), if hsn code already exists, fetch details
    if (hsnInput.value.trim() !== '') {
      fetchHSNDetails(hsnInput.value.trim());
      
      //  Make sure hidden input gets correct value from dropdown
      gstRateHidden.value = gstRateSelect.value;
    }
  });
</script>
{#----------------------------------------------------------------------------#}

{# Validations for Length ,  Height  , width #}

<script>
document.addEventListener("DOMContentLoaded", function () {
  const fields = ["input-length", "input-width", "input-height"];

  fields.forEach(function (fieldId) {
    const input = document.getElementById(fieldId);
    if (!input) return;

    // Create error container
    const errorContainer = document.createElement("div");
    errorContainer.className = "text-danger";
    input.parentNode.appendChild(errorContainer);

    input.addEventListener("input", function () {
      const rawVal = this.value;

      // If it contains non-numeric characters (excluding one dot)
      if (/[^0-9.]/.test(rawVal)) {
        errorContainer.textContent = "Value must be numbers!";
        this.value = rawVal.replace(/[^0-9.]/g, '');
        return;
      }

      let val = this.value;

      const parts = val.split(".");
      if (parts.length > 2) {
        val = parts[0] + "." + parts.slice(1).join("");
      }

      if (parts[1]?.length > 2) {
        parts[1] = parts[1].slice(0, 2);
        val = parts[0] + "." + parts[1];
      }

      if (val.startsWith("0") && !val.startsWith("0.")) {
        val = val.replace(/^0+/, '');
      }

      this.value = val;

      const num = parseFloat(val);
      if (val === "" || isNaN(num) || num <= 0) {
        errorContainer.textContent = "Value must be greater than 0!";
      } else {
        errorContainer.textContent = "";
      }
    });

    input.addEventListener("blur", function () {
      const val = parseFloat(this.value);
      if (isNaN(val) || val <= 0) {
        this.value = '';
        errorContainer.textContent = "Value must be greater than 0!";
      } else {
        errorContainer.textContent = "";
      }
    });
  });

  const form = document.querySelector("form");
  if (form) {
    form.addEventListener("submit", function (e) {
      let hasError = false;
      fields.forEach(function (fieldId) {
        const input = document.getElementById(fieldId);
        const errorContainer = input?.nextElementSibling;
        const val = parseFloat(input?.value);

        if (!input.value || isNaN(val) || val <= 0) {
          input.value = '';
          errorContainer.textContent = "Value must be greater than 0!";
          hasError = true;
        } else {
          errorContainer.textContent = "";
        }
      });
      if (hasError) e.preventDefault();
    });
  }
});
</script>

{# Validations for Price #}
<script>
function validatePriceInput(inputId, errorId) {
    const priceInput = document.getElementById(inputId);
    const errorMsg = document.getElementById(errorId);

    if (priceInput && errorMsg) {
        priceInput.addEventListener('input', function () {
            const rawVal = this.value;

            // Check and clean invalid characters
            if (/[^0-9.]/.test(rawVal)) {
                this.value = rawVal.replace(/[^0-9.]/g, ''); // remove invalid characters
                errorMsg.textContent = "Value must be numbers!";
                errorMsg.style.display = "block";
                return;
            }

            // Clean extra dots
            const parts = this.value.split('.');
            let val = parts[0];
            if (parts.length > 1) {
                val += '.' + parts.slice(1).join('');
            }

            // Remove leading zeros unless decimal
            if (val.startsWith('0') && !val.startsWith('0.')) {
                val = val.replace(/^0+/, '');
            }

            this.value = val;

            const parsed = parseFloat(val);
            if (val === '.' || isNaN(parsed) || parsed <= 0) {
                errorMsg.textContent = "Value must be greater than 0!";
                errorMsg.style.display = "block";
            } else {
                errorMsg.textContent = "";
                errorMsg.style.display = "none";
            }
        });

        priceInput.addEventListener("focus", function () {
            errorMsg.textContent = "";
            errorMsg.style.display = "none";
        });

        priceInput.addEventListener("blur", function () {
            const val = parseFloat(this.value);
            if (isNaN(val) || val <= 0) {
                this.value = '';
                errorMsg.textContent = "Value must be greater than 0!";
                errorMsg.style.display = "block";
            }
        });
    }
}

document.addEventListener('DOMContentLoaded', function () {
    validatePriceInput('input-price', 'error-price');
});
</script>


{# Validations for Product name #}

<script>
  document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.product-name-input').forEach(function(input) {

    // Create an error container if not already present
    let errorContainer = input.parentNode.querySelector('.text-danger');
    if (!errorContainer) {
      errorContainer = document.createElement('div');
      errorContainer.className = 'text-danger';
      input.parentNode.appendChild(errorContainer);
    }

    function validate() {
      const value = input.value.trim();

      if (value.length < 3 || value.length > 255) {
        input.classList.add('input-error'); // apply custom error class to input only
        errorContainer.textContent = "Product Name must be greater than 3 and less than 255 characters!";
      } else {
        input.classList.remove('input-error');
        errorContainer.textContent = "";
      }
    }

    input.addEventListener('blur', validate);
    input.addEventListener('input', validate);
  });
});
</script>

{#Meta Title Validation #}
<script>
  document.addEventListener('DOMContentLoaded', function() {

  // Loop through all meta title inputs
  document.querySelectorAll('input[id^="input-meta-title"]').forEach(function(input) {
    input.addEventListener('input', function() {

      const value = this.value.trim();
      const formGroup = this.closest('.form-group');
      const languageId = this.id.replace('input-meta-title', '');
      const errorElement = document.getElementById('error-meta-title-' + languageId);

      if (value.length < 3 || value.length > 255) {
        formGroup.classList.add('has-error');
        if (errorElement) {
          errorElement.textContent = 'Meta title must be greater than 3 and less than 255 characters!';
        }
      } else {
        formGroup.classList.remove('has-error');
        if (errorElement) {
          errorElement.textContent = '';
        }
      }
    });
  });

  // On page load  show red border if server set error text
  document.querySelectorAll('.form-group').forEach(function(formGroup) {
    const errorElement = formGroup.querySelector('.text-danger');
    if (errorElement && errorElement.textContent.trim() !== '') {
      formGroup.classList.add('has-error');
    }
  });

});
</script>


{# Validations for Modal #}

<script>
document.addEventListener('DOMContentLoaded', function() {

  const modelInput = document.getElementById('input-model');
  const errorDiv = document.getElementById('error-model');
  const formGroup = modelInput.closest('.form-group');

  modelInput.addEventListener('input', function() {
    const value = this.value.trim();

    if (value.length < 3 || value.length > 64) {
      formGroup.classList.add('has-error');
      errorDiv.textContent = 'Model name must be greater than 3 and less than 64 characters!';
    } else {
      formGroup.classList.remove('has-error');
      errorDiv.textContent = '';
    }
  });

  // Apply red border on page load if server-side error exists
  if (errorDiv.textContent.trim() !== '') {
    formGroup.classList.add('has-error');
  }

});
</script>

{# Validations for Actual Weight #}
{# updated the code on 30-04-2025#}

<script>
document.addEventListener('DOMContentLoaded', function() {
  const actualWeightInput = document.getElementById('input-weight');

  if (!actualWeightInput) return;

  // Create error message element
  const errorContainer = document.createElement('div');
  errorContainer.className = 'text-danger';
  actualWeightInput.parentNode.appendChild(errorContainer);

  actualWeightInput.addEventListener('input', function () {
    const rawVal = this.value;

    // If user types characters or symbols other than numbers
    if (/[^0-9]/.test(rawVal)) {
      errorContainer.textContent = 'Please enter the weight in grams only!';
      this.value = rawVal.replace(/[^0-9]/g, ''); // Clean the input by removing non-numeric characters
      return;
    }

    let val = this.value;

    // Remove leading zeros unless it's like "05"
    if (val.startsWith('0') && val.length > 1) {
      val = val.replace(/^0+/, '');
    }

    // If the value is exactly 0, clear the input and show the error
    if (val === '0') {
      this.value = '';
      errorContainer.textContent = 'Weight must be greater than 0!';
      return;
    }

    this.value = val;

    const num = parseInt(val, 10);
    // Ensure the value is greater than 0
    if (val === '' || isNaN(num) || num <= 0) {
      errorContainer.textContent = 'Weight must be greater than 0!';
    } else {
      errorContainer.textContent = '';
    }
  });

  // Also validate on blur
  actualWeightInput.addEventListener('blur', function () {
    const val = this.value.trim();
    const num = parseInt(val, 10);

    // If value is exactly 0 or less than or equal to 0, show the error message
    if (val === '' || isNaN(num) || num <= 0) {
      errorContainer.textContent = 'Weight must be greater than 0!';
    } else {
      errorContainer.textContent = '';
    }
  });
});
</script>
{#----------------------------------------------------------------#}
<script>

document.querySelectorAll('#input-model, #input-price, #input-hsn, #input-weight, #input-length, #input-width, #input-height , .product-name-input, .meta-title-input, #input-manufacturer, #input-vendor').forEach(function(input) {
    input.addEventListener('input', function() {
        this.closest('.form-group').classList.remove('has-error');
    });
});
</script>

<script>

document.addEventListener('DOMContentLoaded', function() {

  // Initially remove 'has-error' class on page load for all fields

  document.querySelectorAll('.form-group').forEach(function(formGroup) {

    formGroup.classList.remove('has-error');
  });


  // Attach input event listener to clear error class when typing in input 

  document.querySelectorAll('.form-control').forEach(function(input) {

    input.addEventListener('input', function() {

      var formGroup = this.closest('.form-group');

      if(formGroup && formGroup.classList.contains('has-error')){

        formGroup.classList.remove('has-error');
      }

    });
  });
});

</script>


<script>

document.addEventListener('DOMContentLoaded', function() {

  // Remove existing error highlight on page load
  document.querySelectorAll('.form-group').forEach(function(formGroup) {
    formGroup.classList.remove('has-error');
  });

  // Apply red border if error message exists anywhere inside .form-group
  document.querySelectorAll('.form-group').forEach(function(formGroup) {
    const error = formGroup.querySelector('.text-danger');
    if (error && error.textContent.trim() !== '') {
      formGroup.classList.add('has-error');
    }
  });

  // Remove red border when user starts typing
  document.querySelectorAll('.form-control').forEach(function(input) {
    input.addEventListener('input', function() {
      var formGroup = this.closest('.form-group');
      if(formGroup && formGroup.classList.contains('has-error')) {
        formGroup.classList.remove('has-error');
      }
    });
  });

});

</script>

<script>
$(document).ready(function() {
    $('#input-length').on('focus', function() {
        $(this).removeClass('is-invalid');
        $(this).parent().removeClass('has-error');
    });

    $('#input-width').on('focus', function() {
        $(this).removeClass('is-invalid');
        $(this).parent().removeClass('has-error');
    });

    $('#input-height').on('focus', function() {
        $(this).removeClass('is-invalid');
        $(this).parent().removeClass('has-error');
    });
});
</script>


<script>
$(document).ready(function() {
    $('input[name="length"], input[name="width"], input[name="height"]').on('focus', function() {
        $(this).siblings('.text-danger').text('');
    });
});
</script>


<script>
$(document).ready(function() {

    $('#input-length').on('focus', function() {
        $(this).parent().find('.text-danger').text('');
        $(this).removeClass('is-invalid');
        $(this).parent().removeClass('has-error');
    });

    $('#input-width').on('focus', function() {
        $(this).parent().find('.text-danger').text('');
        $(this).removeClass('is-invalid');
        $(this).parent().removeClass('has-error');
    });

    $('#input-height').on('focus', function() {
        $(this).parent().find('.text-danger').text('');
        $(this).removeClass('is-invalid');
        $(this).parent().removeClass('has-error');
    });

});

</script>

<script>
$(document).ready(function() {
    $('#input-weight').on('focus', function() {
        $(this).siblings('.text-danger').text('');
        $(this).removeClass('is-invalid');
        $(this).parent().removeClass('has-error');
    });
});
</script>



<script>

$(document).ready(function() {
    $('#input-hsn').on('focus', function() {
        $(this).siblings('.text-danger').text('');
        $(this).removeClass('is-invalid');
        $(this).parent().removeClass('has-error');
    });
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {

  // 1. Highlight form-groups with error messages
  document.querySelectorAll('.form-group').forEach(function (formGroup) {
    const error = formGroup.querySelector('.text-danger');
    if (error && error.textContent.trim() !== '') {
      formGroup.classList.add('has-error');
    }
  });

  // 2. Remove .has-error when user types into any input
  document.querySelectorAll('.form-control').forEach(function (input) {
    input.addEventListener('input', function () {
      const formGroup = this.closest('.form-group');
      if (formGroup && formGroup.classList.contains('has-error')) {
        formGroup.classList.remove('has-error');
      }
    });
  });

  // 3. Handle vendor autocomplete selection
  $('#input-vendor').autocomplete({
    source: function (request, response) {
      $.ajax({
        url: 'index.php?route=vendor/product/seller_autocomplete&user_token={{ user_token }}&filter_name=' + encodeURIComponent(request),
        dataType: 'json',
        success: function (json) {
          json.unshift({ vendor_id: 0, vendorname: '{{ text_none }}' });
          response($.map(json, function (item) {
            return {
              label: item['vendorname'],
              value: item['vendor_id']
            };
          }));
        }
      });
    },
    select: function (item) {
      $('#input-vendor').val(item['label']);
      $('input[name="vendor_id"]').val(item['value']);

      // Remove .has-error and error message
      var formGroup = $('#input-vendor').closest('.form-group');
      formGroup.removeClass('has-error');
      formGroup.find('.text-danger').remove();
    }
  });

  // 4. Handle manufacturer autocomplete selection commented on 15/07/2025
//   $('#input-manufacturer').autocomplete({
//     source: function (request, response) {
//       $.ajax({
//         url: 'index.php?route=catalog/manufacturer/autocomplete&user_token={{ user_token }}&filter_name=' + encodeURIComponent(request),
//         dataType: 'json',
//         success: function (json) {
//           json.unshift({ manufacturer_id: 0, name: '{{ text_none }}' });
//           response($.map(json, function (item) {
//             return {
//               label: item['name'],
//               value: item['manufacturer_id']
//             };
//           }));
//         }
//       });
//     },
//     select: function (item) {
//       $('input[name=\'manufacturer\']').val(item['label']);
//       $('input[name=\'manufacturer_id\']').val(item['value']);

//       // Remove .has-error and error message
//       var formGroup = $('input[name=\'manufacturer\']').closest('.form-group');
//       formGroup.removeClass('has-error');
//       formGroup.find('.text-danger').remove();
//     }
//   });

// });
</script>

{#---------------------------------------------------------------#}
{#variation start #}

<script>
if(document.querySelectorAll('.variant-tab').length>=1){
document.getElementById('saveProduct').innerText = 'Save Variant';
}
if(document.getElementById('variantNameInput').value){
    
document.getElementById('add-variant-tab').innerText = 'Change Variant name';
}

let variantIndex = document.querySelectorAll('.variant-tab').length;
let variantId = variantIndex + 1;
document.getElementById('variant_id').value = variantId;
setTimeout(() => {
const alertEl = document.getElementsByClassName('alert-success')[0];
if (alertEl) {
alertEl.style.display = 'none';
}
}, 3000);
function getTextColor(bgColor) { // Convert named or RGB colors to RGB values
const temp = document.createElement("div");
temp.style.color = bgColor;
document.body.appendChild(temp);
const rgb = getComputedStyle(temp).color;
document.body.removeChild(temp);

// Extract RGB components
const [r, g, b] = rgb.match(/\d+/g).map(Number);

// Calculate luminance
const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;

// Return black for light backgrounds, white for dark
return luminance > 0.5 ? '#000000' : '#ffffff';
}
const variantNameInput = document.getElementById('variant_name');
// const inputColor = document.getElementById('inputColor');

// inputColor.addEventListener('input', () => {
// variantNameInput.value = inputColor.value;
// console.log(variantNameInput.value);
// });
document.getElementById('add-variant-tab').addEventListener('click', function (e) {
e.preventDefault();
document.getElementById('variantNameInput').value = document.getElementById('newVariant').value;
document.getElementById('variantModal').style.display = 'block';
});

// Close modal
document.querySelector('.variantmodalclose').addEventListener('click', function () {
document.getElementById('variantModal').style.display = 'none';
});

// Close modal on outside click
window.addEventListener('click', function (e) {
if (e.target === document.getElementById('variantModal')) {
document.getElementById('variantModal').style.display = 'none';
}
});
const input = document.getElementById('variantNameInput');

input.addEventListener('input', function () {
this.value = this.value.toLowerCase();
});

// Confirm button
document.getElementById('confirmVariant').addEventListener('click', function () {
const variantName = document.getElementById('variantNameInput').value.trim();
if (! variantName) {
alert('Please enter a variant name first.');
return;
}
document.getElementById('add-variant-tab').innerText = 'Change Variant name';
document.getElementById('saveProduct').innerText = 'Save Variant';

let variantIndex = document.querySelectorAll('.variant-tab').length;
const variantId = variantIndex + 1;
document.getElementById('variant_id').value = variantId;
document.getElementById('newVariant').style.display = 'block';
document.getElementById('newVariant').style.width = `${
variantName.length + 5
}ch`;
// document.getElementById('newVariant').style.background = variantName;
// document.getElementById('newVariant').style.color = getTextColor(variantName);;
document.getElementById('newVariant').value = variantName;
document.getElementById('variant_name').value = variantName;
console.log('Variant Name:', variantName);
console.log('Generated Variant ID:', variantId);

// Close modal
document.getElementById('variantModal').style.display = 'none';

// Optionally reset input field
// document.getElementById('variantNameInput').value = '';
});
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const addPage = window.location.href.includes('route=vendor/product/add');
    if (addPage) {
      const createBtn = document.getElementById('add-variant-tab2');
      if (createBtn) {
        createBtn.style.display = 'none';
      }
    }});
</script>
{#variation end s#}

<script>  
$(document).ready(function () {
  let allCategories = [];

  // Fetch categories
  $.ajax({
      url: 'index.php?route=vendor/product/ajaxLoadCategories&user_token={{user_token}}',
      method: 'GET',
      dataType: 'json',
      success: function (data) {
          allCategories = data;
          loadCategories();  // Load and preselect categories
      },
      error: function (xhr, status, error) {
          console.error('AJAX Error:', error);
      }
  });

  function resetAllDropdowns() {
      ['#input-category', '#input-subcategory', '#input-subsubcategory', '#input-subsubsubcategory', '#input-subsubsubsubcategory']
      .forEach(id => $(id).hide().empty());
  }

  function getCategoryChain(childId) {
      const chain = [];
      let currentId = parseInt(childId, 10);

      while (currentId) {
          const node = allCategories.find(c => parseInt(c.category_id,10) === currentId);
          if (!node) break;
          chain.unshift(node);
          currentId = parseInt(node.parent_id,10);
      }

      return chain;
  }

  function fillDropdown(selector, parentId) {
      const $ddl = $(selector).empty().append(new Option('Select', ''));
      allCategories
          .filter(c => parseInt(c.parent_id,10) === parseInt(parentId,10))
          .forEach(c => $ddl.append(new Option(c.category_name, c.category_id)));
      $ddl.show();
      return $ddl;
  }

  function autoSelectChain(chain) {
      const selectors = [
          '#input-category',
          '#input-subcategory',
          '#input-subsubcategory',
          '#input-subsubsubcategory',
          '#input-subsubsubsubcategory'
      ];

      // Fill each dropdown and select the correct value
      chain.forEach((cat, level) => {
          if (level < selectors.length) {
              const parentId = level === 0 ? 0 : chain[level - 1].category_id;
              const $ddl = fillDropdown(selectors[level], parentId);
              $ddl.val(cat.category_id).trigger('change');
          }
      });

      // Hide unused levels
      for (let i = chain.length; i < selectors.length; i++) {
          $(selectors[i]).hide().empty();
      }

      // Show one more level if last selected has children
      let currentParentId = chain[chain.length - 1]?.category_id;

      for (let i = chain.length; i < selectors.length; i++) {
          const childCategories = allCategories.filter(c => parseInt(c.parent_id, 10) === parseInt(currentParentId, 10));
          if (childCategories.length) {
              const $ddl = $(selectors[i]).empty().append(new Option('Select', ''));
              childCategories.forEach(c => $ddl.append(new Option(c.category_name, c.category_id)));
              $ddl.show();
              break;
          } else {
              break;
          }
      }
  }

  function loadCategories() {
      fillDropdown('#input-category', 0); // Always fill top-level

      const chain = [];
      const lvl1 = $('#preselect_level_1').val();
      const lvl2 = $('#preselect_level_2').val();
      const lvl3 = $('#preselect_level_3').val();
      const lvl4 = $('#preselect_level_4').val();
      const lvl5 = $('#preselect_level_5').val();

      [lvl1, lvl2, lvl3, lvl4, lvl5].forEach(id => {
          if (id && id !== '0') {
              const node = allCategories.find(c => parseInt(c.category_id, 10) === parseInt(id, 10));
              if (node) chain.push(node);
          }
      });

      if (chain.length) {
          autoSelectChain(chain);
      }
  }

  // Category search functionality
  $('#category-search').on('input', function () {
      const txt = $(this).val().toLowerCase().trim();

      if (!txt) {
          return loadCategories(); // Reload categories when search is cleared
      }

      const matched = allCategories.filter(c => {
          const names = getCategoryChain(c.category_id)
              .map(n => n.category_name.toLowerCase());
          return names.some(nm => nm.includes(txt));
      });

      if (matched.length) {
          const chain = getCategoryChain(matched[0].category_id);
          autoSelectChain(chain);
      } else {
          resetAllDropdowns();
      }
  });

  // Dropdown change event handlers
  $('#input-category').on('change', function () {
      const id = $(this).val();
      if (id) loadNextLevel(id, '#input-subcategory');
  });
  $('#input-subcategory').on('change', function () {
      const id = $(this).val();
      if (id) loadNextLevel(id, '#input-subsubcategory');
  });
  $('#input-subsubcategory').on('change', function () {
      const id = $(this).val();
      if (id) loadNextLevel(id, '#input-subsubsubcategory');
  });
  $('#input-subsubsubcategory').on('change', function () {
      const id = $(this).val();
      if (id) loadNextLevel(id, '#input-subsubsubsubcategory');
  });

  function loadNextLevel(parentId, dropdownId) {
      const $ddl = $(dropdownId).empty();
      const opts = allCategories.filter(c => parseInt(c.parent_id,10) === parseInt(parentId,10));
      if (!opts.length) return $ddl.hide();
      $ddl.append(new Option('Select', ''));
      opts.forEach(o => $ddl.append(new Option(o.category_name, o.category_id)));
      $ddl.show();
  }
});
</script>

{#Shubham Sir Changes - 27/05/2025#}

<script>
$(document).ready(function () {
  const electronicsCategoryId = '1'; // Update if your electronics category ID is different

  function isElectronicsSelected() {
    let match = false;
    // Check all 5 category levels
    $('#input-category, #input-subcategory, #input-subsubcategory, #input-subsubsubcategory, #input-subsubsubsubcategory').each(function () {
      if ($(this).val() === electronicsCategoryId) {
        match = true;
        return false; // stop loop
      }
    });
    return match;
  }

  function updateConditionField() {
    const isElectronics = isElectronicsSelected();

    if (isElectronics) {
      $('#input-product-condition option[value="refurbished"]').prop('disabled', false);
    } else {
      $('#input-product-condition').val('new');
      $('#input-product-condition option[value="refurbished"]').prop('disabled', true);
      $('#refurbished-description-group').hide();
    }
  }

  // On page load
  updateConditionField();

  // On category change
  $('#input-category, #input-subcategory, #input-subsubcategory, #input-subsubsubcategory, #input-subsubsubsubcategory').on('change', function () {
    updateConditionField();
  });

  // On condition change
  $('#input-product-condition').on('change', function () {
    if ($(this).val() === 'refurbished') {
      $('#refurbished-description-group').show();
    } else {
      $('#refurbished-description-group').hide();
    }
  });
});
</script>

<!-- for update product name  -->
 <script>
$(document).ready(function () {
  // Trigger on load and on condition change
  function updateProductNamesBasedOnCondition() {
    const condition = $('#input-product-condition').val()?.toLowerCase() || '';
    
    $('.product-name').each(function () {
      let original = $(this).data('original-name') || $(this).val();

      // Save original name only once
      if (!$(this).data('original-name')) {
        $(this).data('original-name', original);
      }

      if (condition === 'refurbished') {
        // Avoid duplicate "(Refurbished)" prefix
        if (!original.startsWith('(Refurbished)')) {
          $(this).val('(Refurbished) ' + original);
        } else {
          $(this).val(original); // Already has prefix
        }
      } else {
        $(this).val(original); // Restore original name
      }
    });
  }

  // Run on change and on page load
  $('#input-product-condition').on('change', updateProductNamesBasedOnCondition);
  updateProductNamesBasedOnCondition(); // Initial call
});
</script>
 <!-- --------============== -->
 
 <!-- for description -->
<script>
$(document).ready(function () {
  function prependRefurbishedToDescription() {
    const condition = $('#input-product-condition').val()?.toLowerCase() || '';
    const refurbishedText = $('#input-refurbished-description').val().trim();

    {% for language in languages %}
      const summernoteEditor = $('#input-description{{ language.language_id }}');
      const originalContent = summernoteEditor.summernote('code');

      // Remove any previously prepended refurbished block
      const cleanedContent = originalContent.replace(/<div class="refurbished-block">[\s\S]*?<\/div>/i, '');

      if (condition === 'refurbished' && refurbishedText) {
        // Bold and prepend
        const boldRefurbished = <div class="refurbished-block"><strong>${$('<div>').text(refurbishedText).html()}</strong></div>;
        summernoteEditor.summernote('code', boldRefurbished + cleanedContent);
      } else {
        summernoteEditor.summernote('code', cleanedContent);
      }
    {% endfor %}
  }

  // On input in refurbished description
  $('#input-refurbished-description').on('input', prependRefurbishedToDescription);

  // On condition change
  $('#input-product-condition').on('change', function () {
    if ($(this).val().toLowerCase() === 'refurbished') {
      $('#refurbished-description-group').show();
    } else {
      $('#refurbished-description-group').hide();
      $('#input-refurbished-description').val('');
    }
    prependRefurbishedToDescription();
  });

  // Initial run
  prependRefurbishedToDescription();
});
</script>

 <!-- --------============= -->
{#faq starts #}
<script>
document.addEventListener('DOMContentLoaded', function () {
  let faqIndex = {{ product_faqs|length }};

  const faqList = document.getElementById('faq-list');
  const addFaqBtn = document.getElementById('add-faq');

  // Add FAQ
  addFaqBtn.addEventListener('click', function () {
    const html = `
      <div class="faq-entry well">
        <button type="button" class="btn btn-danger remove-faq pull-right" style="margin-bottom: 5px;">
          <i class="fa fa-minus-circle"></i> Remove
        </button>
        <div class="form-group">
          <label>Question</label>
          <input type="text" name="product_faq[${faqIndex}][question]" class="form-control" />
        </div>
        <div class="form-group">
          <label>Answer</label>
          <textarea name="product_faq[${faqIndex}][answer]" class="form-control" rows="3"></textarea>
        </div>
        <input type="hidden" name="product_faq[${faqIndex}][language_id]" value="{{ language_id }}" />
      </div>
    `;
    faqList.insertAdjacentHTML('beforeend', html);
    faqIndex++;
    reindexFaqs(); //  Reindex after adding
  });

  // Remove FAQ
  faqList.addEventListener('click', function (e) {
    if (e.target.closest('.remove-faq')) {
      e.target.closest('.faq-entry').remove();
      reindexFaqs(); //  Reindex after removing
    }
  });

  // Function to reindex question numbers and names
  function reindexFaqs() {
    const entries = faqList.querySelectorAll('.faq-entry');
    entries.forEach((entry, index) => {
      // Update question label
      const questionLabel = entry.querySelector('.form-group label');
      if (questionLabel) questionLabel.textContent = 'Question ' + (index + 1);

      // Update input name attributes
      const input = entry.querySelector('input[type="text"]');
      const textarea = entry.querySelector('textarea');
      const hidden = entry.querySelector('input[type="hidden"]');

      if (input) input.name = `product_faq[${index}][question]`;
      if (textarea) textarea.name = `product_faq[${index}][answer]`;
      if (hidden) hidden.name = `product_faq[${index}][language_id]`;
    });
  }

  reindexFaqs(); // Initial reindex
});
</script>

{#faq ends #}
{# warranty, return ,replacement start #}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Elements
    const form = document.querySelector('form');

    const replacableSelect = document.getElementById('input-is-replacable');
    const replacementFields = document.getElementById('replacement-fields');

    const warrantySelect = document.getElementById('input-is-warranty');
    const warrantyFields = document.getElementById('warranty-fields');

    const returnSelect = document.getElementById('input-is-returnable');
    const returnFields = document.getElementById('return-fields');

    // Toggle field visibility
    function toggleVisibility(selectEl, fieldEl) {
      fieldEl.style.display = selectEl.value === '1' ? '' : 'none';
    }

    replacableSelect.addEventListener('change', () => toggleVisibility(replacableSelect, replacementFields));
    warrantySelect.addEventListener('change', () => toggleVisibility(warrantySelect, warrantyFields));
    returnSelect.addEventListener('change', () => toggleVisibility(returnSelect, returnFields));

    toggleVisibility(replacableSelect, replacementFields);
    toggleVisibility(warrantySelect, warrantyFields);
    toggleVisibility(returnSelect, returnFields);

    // Form validation
    form.addEventListener('submit', function (e) {
      let isValid = true;

      // Clear all previous errors
      document.querySelectorAll('.text-danger').forEach(el => el.remove());

      // Replacement validation
      if (replacableSelect.value === '1') {
        const reason = document.getElementById('input-replacement-reason');
        const period = document.getElementById('input-replacement-period');
        const policy = document.getElementById('input-replacement-policy');
        const description = document.getElementById('input-replacement-description');

        if (!reason.value.trim()) showError(reason, 'Replacement reason is required');
        if (!period.value.trim()) showError(period, 'Replacement period is required');
        if (!policy.value.trim()) showError(policy, 'Replacement policy is required');
        if (!description.value.trim()) showError(description, 'Replacement description is required');
      }

      // Warranty validation
      if (warrantySelect.value === '1') {
        const warrantyBy = document.getElementById('input-warranty-by');
        const duration = document.getElementById('input-warranty-duration');
        const description = document.getElementById('input-warranty-description');

        if (!warrantyBy.value.trim()) showError(warrantyBy, 'Warranty by is required');
        if (!duration.value.trim()) showError(duration, 'Warranty duration is required');
        if (!description.value.trim()) showError(description, 'Warranty description is required');
      }

      // Return policy validation
      if (returnSelect.value === '1') {
        const duration = document.getElementById('input-return-duration');
        const policyDetails = document.getElementById('input-return-policy');

        if (!duration.value.trim()) showError(duration, 'Return duration is required');
        if (!policyDetails.value.trim()) showError(policyDetails, 'Return policy details are required');
      }

      // Error rendering helper
      function showError(input, message) {
        const error = document.createElement('div');
        error.className = 'text-danger';
        error.textContent = message;
        input.parentNode.appendChild(error);
        isValid = false;
      }

      if (!isValid) e.preventDefault();
    });
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.querySelector('form');
    const nameFields = document.querySelectorAll('.name_checker');
    const periodFields = document.querySelectorAll('.period_checker');

    let nameErrorFlags = new Map();
    let periodErrorFlags = new Map();

    // Show error
    function showError(input, message, className) {
      let existing = input.parentNode.querySelector(`.${className}`);
      if (!existing) {
        existing = document.createElement('div');
        existing.className = `text-danger ${className}`;
        input.parentNode.appendChild(existing);
      }
      existing.textContent = message;
      input.classList.add('is-invalid');
    }

    // Clear error
    function clearError(input, className) {
      const existing = input.parentNode.querySelector(`.${className}`);
      if (existing) existing.remove();
      input.classList.remove('is-invalid');
    }

    // Name validation
    nameFields.forEach((input, index) => {
      input.addEventListener('input', () => {
        const val = input.value.toLowerCase();
        const compact = val.replace(/\s+/g, '');
        let message = "";

        if (compact.includes('ipshopy')) {
          message = "Do not use the word 'ipshopy'.";
        } else if (compact.includes('ipshop')) {
          message = "Do not use the word 'ip shop'.";
        } else if (val.includes('ip shopy')) {
          message = "Do not use the word 'ip shopy'.";
        } else if (val.includes('ip shop')) {
          message = "Do not use the word 'ip shop'.";
        } else if (val.includes('this platform')) {
          message = "Do not use the phrase 'this platform'.";
        } else if (val.includes('platform')) {
          message = "Do not use the word 'platform'.";
        }

        if (message) {
          showError(input, message, 'name-error');
          nameErrorFlags.set(index, true);
        } else {
          clearError(input, 'name-error');
          nameErrorFlags.set(index, false);
        }
      });
    });

    // Period validation
periodFields.forEach((input, index) => {
  input.addEventListener('input', () => {
    let val = input.value.replace(/\D/g, '');
    input.value = val;

    let limit = 7;
    if (input.id === 'input-warranty-duration') {
      limit = 60;
    } else if (input.id === 'input-replacement-period') {
      limit = 7;
    }

    if (val !== '' && parseInt(val) > limit) {
      showError(input, `Value must be less than or equal to ${limit}`, 'period-error');
      periodErrorFlags.set(index, true);
    } else {
      clearError(input, 'period-error');
      periodErrorFlags.set(index, false);
    }
  });
});


    // Form submit
    form.addEventListener('submit', function (e) {
      // Trigger input validation before checking
      nameFields.forEach(field => field.dispatchEvent(new Event('input')));
      periodFields.forEach(field => field.dispatchEvent(new Event('input')));

      // Check all flags
      let errorPresent = false;
      nameErrorFlags.forEach(flag => { if (flag) errorPresent = true; });
      periodErrorFlags.forEach(flag => { if (flag) errorPresent = true; });

      // Stop submission if any error
      if (errorPresent) {
        e.preventDefault();
        alert('Please fix the highlighted errors before submitting the form.');
      }
    });
  });
</script>
<style>
  .is-invalid {
  border-color: #dc3545 !important;
  /* background-color: #f8d7da; */
}

.text-danger {
  color: #dc3545;
  font-size: 13px;
  margin-top: 4px;
}

</style>
{#warranty, return replacement end #}
{{ footer }}
